(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8175],{3879:function(e,t,l){Promise.resolve().then(l.bind(l,2250))},2250:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return Z}});var a=l(7437),s=l(1641),r=l(710),n=l(9938),o=l(5922),i=l(2265),d=l(681),c=l(9343),u=e=>{let{isVisibleUpload:t,onUpload:l,onCloseModal:s}=e,[r,n]=(0,i.useState)(""),{register:o,handleSubmit:d,formState:{errors:u},reset:m,control:x}=(0,c.cI)(),h=(e,t)=>{if(e.target.files){let l=Array.from(e.target.files),a=l.filter(e=>e.size<=2097152);a.length<l.length?n("Some files exceed the 2MB size limit and were not selected."):n(""),t.onChange(a)}};return(0,a.jsx)("div",{className:"content mt-6 w-full px-10",children:(0,a.jsxs)("form",{onSubmit:d(e=>{let{files:t,nama:a}=e;t.length>0&&""!==a.trim()?(l(t,a),m(),s&&s()):n("Please enter a name and select files to upload.")}),children:[(0,a.jsx)("label",{className:"w-full text-start block mb-2 font-medium text-gray-900 dark:text-white text-lg",htmlFor:"nama",children:"Nama File"}),(0,a.jsx)("input",{className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 p-2",...o("nama",{required:"Nama file is required"})}),u.nama&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:u.nama.message}),(0,a.jsx)("label",{className:"w-full text-start block mb-2 font-medium text-gray-900 dark:text-white text-lg mt-3",htmlFor:"file_input",children:"Upload File"}),(0,a.jsx)(c.Qr,{name:"files",control:x,rules:{required:"Files are required"},render:e=>{let{field:t}=e;return(0,a.jsx)("input",{className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 p-2",type:"file",onChange:e=>h(e,t)})}}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",id:"file_input_help",children:"(MAX. 2MB)."}),u.files&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:u.files.message}),r&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:r}),(0,a.jsx)("div",{className:"flex gap-2 mt-4",children:(0,a.jsx)("button",{type:"submit",className:"bg-blue-700 text-white p-2 rounded w-full",children:"Upload"})})]})})},m=l(4210),x=l(4200),h=l(7702),f=l(8079),g=e=>{var t,l,s;let r="/documents/".concat(null===(t=e.data)||void 0===t?void 0:t.Id),[o,i,d,c]=(0,n.Y)(r,"delete"),u=async()=>{await c(r),e.onCloseModal&&e.onCloseModal()};return(0,a.jsxs)("div",{className:"flex relative justify-start pt-3 h-full items-start flex-col p-2",children:[(0,a.jsx)("div",{className:"w-full items-start flex justify-center",children:"Anda yakin akan delete dokumen pendukung"}),(0,a.jsx)("p",{className:"w-full tex-center text-lg font-bold flex justify-center items-center",children:null===(l=e.data)||void 0===l?void 0:l.nama}),(0,a.jsxs)("div",{className:"button flex gap-2 justify-end items-center w-full mt-6 pt-6 px-2",children:[(0,a.jsx)(h.Z,{text:"Ok",onClick:u,className:"rounded-lg"}),(0,a.jsx)(f.Z,{className:"rounded-lg",text:"Batal",onClick:e.onCloseModal},null===(s=e.data)||void 0===s?void 0:s.Id)]})]})},b=l(7863),p=l(2546),j=l(6215),w=e=>{let{onChange:t}=e;localStorage.getItem("roleId");let[l,s,r]=(0,o.Y)("/users?role=OPD",!1);return(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)(j.Z,{error:r,loading:s,dataComponent:(0,a.jsx)(p.Z,{label:"Lihat Dokumen Berdasarkan Perangkat Daerah",options:[{Id:0,name:"Semua Perangkat Daerah"},...l],defaultValue:0,optionLabel:e=>e.name.split(" ").map((e,t)=>0===t?e.charAt(0).toUpperCase()+e.slice(1):e).join(" "),optionValue:e=>e.Id,onChange:e=>{t(parseInt(e.target.value),"opd")},defaultText:"Pilih Perangkat Daerah"})})})},k=l(624),v=l(6279),y=l(2553),N=l(3831),C=l(3370),S=l(5851),Z=()=>{let[e,t]=(0,i.useState)(""),[l,c]=(0,i.useState)(0),[h,f]=(0,i.useState)(),[p,j]=(0,i.useState)("");(0,i.useEffect)(()=>{{let e=window.localStorage.getItem("roleId");null!==e?j(e):console.error("roleId tidak tersedia di local storage")}},[]);let[Z,I,D]=(0,o.Y)("documents?userId=".concat(l),!0,h);console.log("datass",Z,l);let F=e?Z.filter(t=>t.nama&&t.nama.toLowerCase().includes(e.toLowerCase())):Z;console.log("data",Z);let[P,A]=(0,i.useState)(),[z,M]=(0,i.useState)(!1),V=e=>{let t;let l=(0,k.D)(e),a=new Date,s=(0,v.X)(a,l),r=(0,y.A)(a,l),n=(0,N.j)(a,l);return t=s<1?"beberapa detik yang lalu":s<60?"".concat(s," menit yang lalu"):r<24?"".concat(r," jam yang lalu"):"".concat(n," hari yang lalu"),"".concat(t," (").concat((0,C.WU)(l,"dd-MMMM-yyyy",{locale:S.id}),")")},[T,E]=(0,i.useState)(!1),[U,,_,L]=(0,n.Y)("/documents","post",null,!0),B=()=>{E(!1),M(!1),f(!h)};return(0,a.jsx)("main",{className:"flex bg-[#FAFAFA] w-full flex-col items-start justify-start m-0 p-3 ",children:(0,a.jsxs)("div",{className:"mt-[10vh] overflow-y-auto w-full items-start flex flex-col justify-center h-full gap-3 p-3",children:[(0,a.jsx)(x.Z,{isVisibleConfirm:z,setIsVisibleConfirm:M,onCloseConfirm:()=>M(!1),title:"Konfirmasi Delete",children:(0,a.jsx)(g,{data:P,onCloseModal:B})}),(0,a.jsxs)(r.Z,{isVisibleSmall:T,onCloseSmall:()=>E(!1),setIsVisibleSmall:E,title:"Upload Dokumen Pendukung",children:[(0,a.jsx)("h1",{className:"font-bold text-xl text-center mt-4",children:"Upload Dokumen Pendukung"}),(0,a.jsx)(u,{onUpload:(e,t)=>{let l={Nama:t,dokumen:e[0]};console.log(l),L(l),f(!h)},onCloseModal:B})]}),(0,a.jsx)("div",{className:"flex flex-col select-area bg-success w-full bg-blue-500 text-white p-4 py-5 rounded-lg shadow-xl",children:(0,a.jsx)(w,{onChange:(e,t)=>{"opd"===t&&(c(e),f(!h))}})}),(0,a.jsxs)("div",{className:"flex justify-between p-2 items-center w-full",children:[(0,a.jsx)("input",{type:"text",placeholder:"Cari dokumen pendukung berdasarkan nama",value:e,onChange:e=>t(e.target.value),className:"p-2 border border-gray-300 rounded w-[60%]"}),"2"===p?(0,a.jsx)(s.Z,{onClick:()=>{E(!0)},text:"Tambah Dokumen Pendukung",title:"Tambah Dokumen Pendukung",className:"p-2 px-3 "}):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsx)("div",{className:"table-container w-full gap-3",children:(0,a.jsx)("div",{className:"w-full",children:F.length>0?(0,a.jsx)(d.ZP,{columns:[{name:"No",selector:(e,t)=>(null!=t?t:0)+1,sortable:!0,width:"10%"},{name:"Nama Dokumen",selector:e=>e.nama,sortable:!0,width:"65%",wrap:!0},{name:"Updated",selector:e=>V(e.updatedAt),sortable:!0,width:"15%"},{name:"Aksi",cell:e=>(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[(0,a.jsx)(m.Z,{size:20,onClick:()=>window.open("".concat("https://inspektorat-be.agriciatech.com","/").concat(e.dokumen),"_blank"),tooltip:"Lihat Dokumen Pendukung ".concat(e.nama)}),"2"===p?(0,a.jsx)(b.Z,{onClick:()=>{console.log(e),A(e),M(!0),f(!h)},tooltip:"Hapus Dokumen Pendukung ".concat(e.nama)}):(0,a.jsx)(a.Fragment,{})]})}),width:"10%",ignoreRowClick:!0}],data:F,pagination:!0,responsive:!0,striped:!0,highlightOnHover:!0,customStyles:{headCells:{style:{backgroundColor:"#408EFD",color:"white","&:first-child":{borderTopLeftRadius:"1rem"},"&:last-child":{borderTopRightRadius:"1rem"}}}}}):(0,a.jsx)("div",{className:"p-4 bg-yellow-600 rounded-md text-white font-bold w-full ",children:"Data Dokumen Pendukung tidak tersedia"})})})]})})}},1641:function(e,t,l){"use strict";var a=l(7437);l(2265);var s=l(3781),r=l(6408);t.Z=e=>{let{text:t,onClick:l,className:n,title:o,tooltip:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{"data-tooltip-id":i,"data-tooltip-content":i,children:(0,a.jsxs)("button",{className:"bg-transparent font-button  outline-2 transition-colors outline-none outline-blue-500 hover:bg-blue-500 text-blue-500 hover:text-white font-bold rounded flex items-center gap-1 ".concat(n),type:"button",onClick:l,title:o||"Tambah Data",children:[(0,a.jsx)(s.B8K,{className:"font-bold"})," ",t]})}),(0,a.jsx)(r.u,{id:i,className:"tooltip"})]})}},7702:function(e,t,l){"use strict";var a=l(7437);l(2265),t.Z=e=>{let{text:t,onClick:l,className:s}=e;return(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-10 rounded-full transition-all ".concat(s),type:"button",onClick:l,children:t})}},8079:function(e,t,l){"use strict";var a=l(7437);l(2265),t.Z=e=>{let{text:t,onClick:l,className:s}=e;return(0,a.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-10 rounded-full transition-all ".concat(s),type:"button",onClick:l,children:t})}},4210:function(e,t,l){"use strict";var a=l(7437);l(2265);var s=l(3781),r=l(6408);t.Z=e=>{let{onClick:t,className:l,size:n,title:o,tooltip:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{"data-tooltip-id":i,"data-tooltip-content":i,children:(0,a.jsx)("button",{type:"button",role:"button",onClick:t,title:o||"Lihat",className:"transition-all rounded-full h-max p-1 bg-blue-500 hover:bg-blue-700 ".concat(l),children:(0,a.jsx)(s.rCC,{className:"text-white",size:n||20})})}),(0,a.jsx)(r.u,{id:i,className:"tooltip"})]})}},7863:function(e,t,l){"use strict";var a=l(7437);l(2265);var s=l(3781),r=l(6408);t.Z=e=>{let{onClick:t,className:l,size:n,tooltip:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{"data-tooltip-id":o,"data-tooltip-content":o,children:(0,a.jsx)("button",{type:"button",role:"button",onClick:t,children:(0,a.jsx)(s.VgY,{className:"transition-all text-red-700 hover:text-red-800 ".concat(l),size:n||20})})}),(0,a.jsx)(r.u,{id:o,className:"tooltip"})]})}},6215:function(e,t,l){"use strict";var a=l(7437);l(2265),t.Z=e=>{let{loading:t,error:l,dataComponent:s,text:r}=e;return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsx)("div",{className:"bg-slate-500 h-full min-h-[300px] text-white animate-pulse w-full text-sm p-2 rounded-lg flex justify-center items-center text-center mb-5",children:r||"Loading Data..."}):l?(0,a.jsxs)("div",{className:"text-red-700 font-bold text-lg",children:["Error: ",l.message]}):(0,a.jsx)(a.Fragment,{children:s})})}},2546:function(e,t,l){"use strict";var a=l(7437);l(2265),t.Z=e=>{let{options:t,optionLabel:l,optionValue:s,onChange:r,defaultValue:n="",defaultText:o="Pilih ...",disabled:i,className:d,label:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,a.jsx)("label",{htmlFor:o,children:c}),(0,a.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ".concat(d),onChange:r,defaultValue:n,disabled:i,id:o,children:[(0,a.jsx)("option",{value:"",disabled:!0,id:o,children:o}),null==t?void 0:t.map(e=>(0,a.jsx)("option",{value:s(e),children:l(e)},s(e)))]})]})}},4200:function(e,t,l){"use strict";l.d(t,{Z:function(){return o}});var a=l(7437),s=l(2265),r=()=>{let[e,t]=(0,s.useState)(!1);return{modal:{isVisibleConfirm:e,setIsVisibleConfirm:t,onCloseConfirm:()=>t(!1)},visible:e,setVisible:t}},n=l(5097),o=e=>{let{isVisibleConfirm:t,setIsVisibleConfirm:l,onCloseConfirm:s,children:o,title:i,className:d}=e;return r(),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"\n          ".concat(t?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,a.jsx)("div",{onClick:()=>s(),className:" h-screen flex lg:w-[50%] w-[5%]  md:w-[20%]"}),(0,a.jsxs)("div",{className:" h-screen flex lg:w-[50%] w-full  flex-col justify-center ",children:[(0,a.jsx)("div",{onClick:()=>s(),className:"md:h-[50%] h-[50%] w-full"}),(0,a.jsxs)("div",{className:"h-[30%] relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,a.jsxs)("div",{onClick:()=>s(),className:"z-10 h-[10%] flex justify-between items-center p-5 cursor-pointer rounded-md bg-blue-500 text-white w-full ".concat(d),children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:i}),(0,a.jsx)(n.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,a.jsx)("div",{className:"overflow-y-auto",children:o})]}),(0,a.jsx)("div",{onClick:()=>s(),className:"md:h-[50%]  h-[50%]  w-full"})]}),(0,a.jsx)("div",{onClick:()=>s(),className:" h-screen flex lg:w-[50%] w-[5%]  md:w-[20%]"})]})})}},6409:function(e,t,l){"use strict";var a=l(2265);t.Z=()=>{let[e,t]=(0,a.useState)(!1);return{modal:{isVisibleSmall:e,setIsVisibleSmall:t,onCloseSmall:()=>t(!1)},visible:e,setVisible:t}}},710:function(e,t,l){"use strict";var a=l(7437),s=l(6409),r=l(5097);t.Z=e=>{let{isVisibleSmall:t,setIsVisibleSmall:l,onCloseSmall:n,children:o,title:i}=e;return(0,s.Z)(),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"\n          ".concat(t?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50  h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,a.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"}),(0,a.jsxs)("div",{className:" h-screen flex lg:w-[40%] w-full flex-col ",children:[(0,a.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"}),(0,a.jsxs)("div",{className:"h-full relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,a.jsxs)("div",{onClick:()=>n(),className:"z-10 h-[10%] flex justify-between items-center p-3 cursor-pointer rounded-md bg-blue-500 text-white w-full",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:i}),(0,a.jsx)(r.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,a.jsx)("div",{className:"overflow-y-auto",children:o})]}),(0,a.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"})]}),(0,a.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"})]})})}},361:function(e,t,l){"use strict";l.d(t,{H:function(){return n}});var a=l(2126);let s="",r=a.Z.create({baseURL:"inspektorat-be.agriciatech.com/api/v1"}),n=()=>{let e=localStorage.getItem("token");e&&(s=e,r.defaults.headers.common.Authorization="Bearer ".concat(s))};r.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),t.Z=r},9938:function(e,t,l){"use strict";l.d(t,{Y:function(){return n}});var a=l(2265),s=l(361),r=l(3580);function n(e,t,l,n){let[o,i]=(0,a.useState)(l||null),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(null);return[o,d,u,async l=>{try{let a;c(!0);let o=localStorage.getItem("token"),d={Authorization:"Bearer ".concat(o)};switch(n&&(d["Content-Type"]="multipart/form-data"),t){case"post":a=await s.Z.post(e,l,{headers:d});break;case"put":a=await s.Z.put(e,l,{headers:d});break;case"delete":a=await s.Z.delete(e,{headers:d});break;default:throw Error("Unsupported HTTP method")}r.Am.success(a.data.message,{position:"top-right"}),i(a.data),console.log("response",a)}catch(e){console.log("error",e),r.Am.error(e.message,{position:"top-right"}),m(e)}finally{c(!1)}}]}},5922:function(e,t,l){"use strict";l.d(t,{Y:function(){return r}});var a=l(2265),s=l(361);function r(e,t,l){let[r,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)();(0,a.useEffect)(()=>{null!=l&&m(l)},[l]);let x=async()=>{i(!0);try{let t=localStorage.getItem("token"),l=await s.Z.get(e,{headers:{Authorization:"Bearer ".concat(t)}});n(l.data.data),c(null)}catch(e){c(e)}finally{i(!1)}};return(0,a.useEffect)(()=>{if(t){let e=setInterval(x,1e3);return()=>{clearInterval(e)}}x()},[e,t]),(0,a.useEffect)(()=>{x()},[u]),[r,o,d]}}},function(e){e.O(0,[5706,1779,2126,6713,9343,3580,1273,5306,2971,7023,1744],function(){return e(e.s=3879)}),_N_E=e.O()}]);
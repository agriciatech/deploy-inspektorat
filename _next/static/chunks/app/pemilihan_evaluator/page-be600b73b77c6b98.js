(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3882],{6842:function(e,t,a){Promise.resolve().then(a.bind(a,3589))},3589:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),o=a(2265),s=a(361),l=a(681),n=()=>{let[e,t]=(0,o.useState)([]),a=async()=>{try{console.log("Fetching users...");let e=await s.Z.get("/roles");console.log("Response received role:",e.data),t(e.data.data)}catch(e){console.log("Error fetching users:",e)}};return(0,o.useEffect)(()=>{a()},[]),{header:["No","Nama OPD","Evaluator"]}},c=()=>{let[e,t]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[i,u]=(0,o.useState)(!1),{header:d}=n(),[g,h]=(0,o.useState)(""),[m,f]=(0,o.useState)([]),[p,v]=(0,o.useState)([]),[x,w]=(0,o.useState)([]),k=async(e,t)=>{console.log("USERID",e),console.log("EVALUATOR",t);try{let a=await s.Z.post("/evaluator/".concat(e),{Fk_Evaluator:parseInt(t)},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("POST response:",a),y()}catch(e){console.error("Error posting evaluator:",e)}},b=d.map(e=>"id"===e.toLowerCase()?{name:e,wrap:!0,selector:e=>e.Id,sortable:!0}:"no"===e.toLowerCase()?{name:e,wrap:!0,selector:(e,t)=>t+1,sortable:!0}:"nama opd"===e.toLowerCase()?{name:e,wrap:!0,selector:e=>e.name,sortable:!0}:"evaluator"===e.toLowerCase()?{name:e,cell:e=>(0,r.jsxs)("select",{value:""==e.Fk_Evaluator||null==e.Fk_Evaluator?0:e.Fk_Evaluator,onChange:t=>k(e.Id,t.target.value),children:[(0,r.jsx)("option",{defaultValue:0,children:"Pilih Evaluator"}),m.map((e,t)=>(0,r.jsx)("option",{value:e.Id,children:e.name},t))]}),ignoreRowClick:!0,button:!0}:void 0).filter(e=>void 0!==e),y=async()=>{try{console.log("Fetching users...");let e=await s.Z.get("/users?role=OPD",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Response received:",e.data),v(e.data.data),w(e.data.data)}catch(e){console.log("Error fetching users:",e)}},j=async()=>{try{console.log("Fetching users...");let e=await s.Z.get("/users?role=Inspektorat",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Response received:",e.data),f(e.data.data)}catch(e){console.log("Error fetching users:",e)}},[S,E]=(0,o.useState)(!1);console.log("success",S);let[N,C]=(0,o.useState)(1);return console.log(S),(0,o.useEffect)(()=>{y(),j()},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,r.jsx)("div",{className:"mt-[10vh] overflow-y-auto w-full items-center flex h-full flex-col",children:(0,r.jsxs)("div",{className:"lg:px-8 px-3 w-full h-full",children:[(0,r.jsxs)("div",{className:"w-full justify-between items-center py-7 flex flex-row",children:[(0,r.jsx)("label",{className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,r.jsx)("input",{type:"search",onChange:e=>{let{value:t}=e.target;w(p.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())))},id:"default-search",className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search..."})]})]}),(0,r.jsx)(l.ZP,{columns:b,className:"bg-blue-500",data:x,pagination:!0,responsive:!0,highlightOnHover:!0})]})})})})}},361:function(e,t,a){"use strict";a.d(t,{H:function(){return l}});var r=a(2126);let o="",s=r.Z.create({baseURL:"https://inspektorat-dev.agriciatech.com/api/v1"}),l=()=>{let e=localStorage.getItem("token");e&&(o=e,s.defaults.headers.common.Authorization="Bearer ".concat(o))};s.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),t.Z=s}},function(e){e.O(0,[2126,6713,2971,7023,1744],function(){return e(e.s=6842)}),_N_E=e.O()}]);
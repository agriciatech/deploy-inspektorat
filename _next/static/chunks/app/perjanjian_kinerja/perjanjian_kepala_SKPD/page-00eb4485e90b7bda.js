(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3923],{2189:function(e,a,t){Promise.resolve().then(t.bind(t,1341))},1341:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var l=t(7437),s=t(2265);let r=()=>{let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(""),[r,n]=(0,s.useState)([]),[o,i]=(0,s.useState)(0),[d,c]=(0,s.useState)(["No","Sasaran Perangkat Daerah"]),[u,h]=(0,s.useState)(["No","Indikator Sasaran Perangkat Daerah","Target"]),[m,b]=(0,s.useState)("2020"),[p,x]=(0,s.useState)([]),[f,j]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1);return{detailTahun:e,popUpEdit:g,idUser:o,setIdUser:i,setPopUpEdit:v,popUpAdd:f,setPopUpAdd:j,dataPejabat:p,setDataPejabat:x,dataTable:r,setDataTable:n,headerDataSasaranPD:d,headerDataIndikatorSasaranPD:u,setHeaderDataIndikatorSasaranPD:h,setHeaderDataSasaranPD:c,setDetailTahun:a,tahunSelected:m,setTahunSelected:b,detailUser:t,setDetailUser:l}};t(1436);var n=t(361),o=t(681),i=t(3580);t(4193);var d=t(710),c=t(5447),u=t(9343);let h=e=>{let{register:a,handleSubmit:t,formState:{errors:r},reset:o}=(0,u.cI)(),d=(0,s.useRef)(null),[h,m]=(0,s.useState)(""),b=async a=>{let{Fk_Tahun:t,nama:l,nip:s,jabatan:r}=a;console.log("data pejabat",a);let d=e.id_tahun;try{let a=await n.Z.post("/RsasaranPDTahun",{Fk_Tahun:d,jabatan:r,nip:s,nama:l},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("response",a.status),200===a.status&&(m(""),e.data(),i.Am.success("Data Pejabat Berhasil Dibuat!",{position:"top-right"}),e.setVisible(!1),o())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";m(e),i.Am.error(e,{position:"top-right"}),o()}else if(e.response&&403===e.response.status){let e="Gagal menambahkan Data Pejabat!";m(e),i.Am.error(e,{position:"top-right"}),o()}else{console.log("Status respons lainnya:",e.message);let a="Gagal membuat Data Pejabat!,  ".concat(e.message);m(a),i.Am.error(a,{position:"top-right"}),o()}}};return(0,s.useEffect)(()=>{d.current&&d.current.focus()},[]),(0,s.useEffect)(()=>{e.isVisible||o()},[e.isVisible,o]),(0,l.jsx)("div",{className:"w-full h-full  px-4",children:(0,l.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:t(b),children:[(0,l.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,l.jsx)("label",{htmlFor:"nama",className:"block mb-1 required",children:"Nama"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.nama?"border-red-500":"border-gray-300"),type:"text",id:"nama",...a("nama",{required:"Nama is required."}),placeholder:"Enter your Nama"}),r.nama&&(0,l.jsx)("p",{className:"text-red-500",children:r.nama.message}),(0,l.jsx)("label",{htmlFor:"Nip",className:"block mb-1 required",children:"NIP"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.nip?"border-red-500":"border-gray-300"),type:"text",id:"nip",...a("nip",{required:"NIP is required."}),placeholder:"Enter your NIP"}),r.nip&&(0,l.jsx)("p",{className:"text-red-500",children:r.nip.message}),(0,l.jsx)("label",{htmlFor:"Jabatan",className:"block mb-1 required",children:"Jabatan"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.jabatan?"border-red-500":"border-gray-300"),type:"text",id:"jabatan",...a("jabatan",{required:"Jabatan is required."}),placeholder:"Enter your Jabatan"}),r.jabatan&&(0,l.jsx)("p",{className:"text-red-500",children:r.jabatan.message})]}),(0,l.jsx)("div",{className:"py-5 flex flex-col",children:(0,l.jsx)(c.Z,{text:"Tambah Data Pejabat",className:"h-10"})})]})})},m=e=>{let{register:a,handleSubmit:t,formState:{errors:r},reset:o,setValue:d}=(0,u.cI)({defaultValues:{nama:"",nip:"",jabatan:""}});(0,s.useEffect)(()=>{var a,t,l;d("nama",null===(a=e.dataPejabat[0])||void 0===a?void 0:a.Nama),d("nip",null===(t=e.dataPejabat[0])||void 0===t?void 0:t.Nip),d("jabatan",null===(l=e.dataPejabat[0])||void 0===l?void 0:l.Jabatan)},[e.dataPejabat,d]);let h=(0,s.useRef)(null),[m,b]=(0,s.useState)(""),p=async a=>{var t,l;let{nama:s,nip:r,jabatan:d}=a;console.log(" Ini data pejabat data pejabat",null===(t=e.dataPejabat[0])||void 0===t?void 0:t.Id);try{let a=await n.Z.put("/RsasaranPDTahun/".concat(null===(l=e.dataPejabat[0])||void 0===l?void 0:l.Id),{jabatan:d,nip:r,nama:s},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("response",a.status),200===a.status&&(b(""),e.data(),i.Am.success("Data Pejabat Berhasil Diperbarui!",{position:"top-right"}),e.setVisible(!1),o())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";b(e),i.Am.error(e,{position:"top-right"})}else if(e.response&&403===e.response.status){let e="Gagal Memperbarui Data Pejabat!";b(e),i.Am.error(e,{position:"top-right"})}else{console.log("Status respons lainnya:",e.message);let a="Gagal Memperbarui Data Pejabat!,  ".concat(e.message);b(a),i.Am.error(a,{position:"top-right"})}}};return(0,s.useEffect)(()=>{h.current&&h.current.focus()},[]),(0,s.useEffect)(()=>{e.isVisible},[e.isVisible]),(0,l.jsx)("div",{className:"w-full h-full  px-4",children:(0,l.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:t(p),children:[(0,l.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,l.jsx)("label",{htmlFor:"nama",className:"block mb-1 required",children:"Nama"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.nama?"border-red-500":"border-gray-300"),type:"text",id:"nama",...a("nama",{required:"Nama is required."}),placeholder:"Enter your Nama"}),r.nama&&(0,l.jsx)("p",{className:"text-red-500",children:r.nama.message}),(0,l.jsx)("label",{htmlFor:"Nip",className:"block mb-1 required",children:"NIP"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.nip?"border-red-500":"border-gray-300"),type:"text",id:"nip",...a("nip",{required:"NIP is required."}),placeholder:"Enter your NIP"}),r.nip&&(0,l.jsx)("p",{className:"text-red-500",children:r.nip.message}),(0,l.jsx)("label",{htmlFor:"Jabatan",className:"block mb-1 required",children:"Jabatan"}),(0,l.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(r.jabatan?"border-red-500":"border-gray-300"),type:"text",id:"jabatan",...a("jabatan",{required:"Jabatan is required."}),placeholder:"Enter your Jabatan"}),r.jabatan&&(0,l.jsx)("p",{className:"text-red-500",children:r.jabatan.message})]}),(0,l.jsx)("div",{className:"py-5 flex flex-col",children:(0,l.jsx)(c.Z,{text:"Edit Data Pejabat",className:"h-10"})})]})})};var b=t(8196),p=()=>{var e,a,t,c,u;let p=r(),x={headCells:{style:{backgroundColor:"#408EFD",color:"white","&:first-child":{borderTopLeftRadius:"1rem"},"&:last-child":{borderTopRightRadius:"1rem"}}}},f=async()=>{try{let e=await n.Z.get("/tahun",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});p.setDetailTahun(e.data.data)}catch(e){console.log("Error fetching users:",e)}},j=async()=>{try{let e=await n.Z.get("/user",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});p.setDetailUser(e.data.name),p.setIdUser(e.data.Id)}catch(e){console.log("Error fetching users:",e)}},[g,v]=(0,s.useState)(1),N=async()=>{try{let e=await n.Z.get("/formulir9/view?tahun=".concat(p.tahunSelected,"&opd=").concat(p.idUser),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});p.setDataPejabat([e.data.pejabat]),p.setDataTable(e.data.data),console.log("data pejabat",[e.data.pejabat])}catch(e){console.log("Error fetching users:",e)}},w=p.headerDataSasaranPD.map((e,a)=>{switch(e.toLowerCase()){case"no":return{name:e,wrap:!0,width:"10%",selector:(e,a)=>a+1};case"sasaran perangkat daerah":return{name:e,wrap:!0,selector:e=>e.SasaranPD}}}),y=async()=>{try{var e;let a=await n.Z.get("https://inspektorat-be.agriciatech.com/docx/api/v1/form9/".concat(p.tahunSelected,"?idOPD=").concat(null===(e=p.dataPejabat[0])||void 0===e?void 0:e.Id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("data download",a.data);let t=await n.Z.get("https://inspektorat-be.agriciatech.com/docx/".concat(a.data.data[0]),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},responseType:"blob"}),l=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=l,s.setAttribute("download","formulir9_page1_".concat(p.tahunSelected,".docx")),document.body.appendChild(s),s.click(),document.body.removeChild(s);let r=await n.Z.get("https://inspektorat-be.agriciatech.com/docx/".concat(a.data.data[1]),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},responseType:"blob"}),o=window.URL.createObjectURL(new Blob([r.data])),i=document.createElement("a");i.href=o,i.setAttribute("download","formulir9_page2_".concat(p.tahunSelected,".docx")),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(e){if(e){i.Am.error("Tidak Ada Data",{position:"top-right"});return}}};return(0,s.useEffect)(()=>{f(),j()},[]),(0,s.useEffect)(()=>{N()},[p.tahunSelected]),console.log("selected tahun",p.tahunSelected),console.log("selectedIdtHAUN",g),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{isVisibleSmall:p.popUpAdd,setIsVisibleSmall:p.setPopUpAdd,onCloseSmall:()=>p.setPopUpAdd(!1),children:(0,l.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,l.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Tambah Data Pejabat"}),(0,l.jsx)(h,{data:N,id_tahun:g,setVisible:p.setPopUpAdd,isVisible:p.popUpAdd})]})}),(0,l.jsx)(d.Z,{isVisibleSmall:p.popUpEdit,setIsVisibleSmall:p.setPopUpEdit,onCloseSmall:()=>p.setPopUpEdit(!1),children:(0,l.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,l.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Data Pejabat"}),(0,l.jsx)(m,{data:N,dataPejabat:p.dataPejabat,setVisible:p.setPopUpEdit,isVisible:p.popUpEdit})]})}),(0,l.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,l.jsxs)("div",{className:"mt-[10vh] h-full overflow-y-auto w-full items-center flex justify-start pt-5 px-2 flex-col ",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full mb-1 bg-blue-600 p-3 rounded-xl text-white font-bold",children:[(0,l.jsxs)("div",{className:"flex w-full justify-start",children:[" ",(0,l.jsx)("table",{className:"table-auto",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Periode"}),(0,l.jsx)("td",{className:"px-1",children:":"}),p.detailTahun.length>0&&(0,l.jsxs)(l.Fragment,{children:[p.detailTahun[0].tahun," ","s/d"," ",p.detailTahun[p.detailTahun.length-1].tahun]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Perangkat Daerah"}),(0,l.jsx)("td",{className:"",children:":"}),(0,l.jsx)("td",{children:p.detailUser})]})]})})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{id:"tahunSelected",value:p.tahunSelected,className:"bg-gray-50 border-2 border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{let a=e.target.value,t=p.detailTahun.find(e=>e.tahun===a);t&&(p.setTahunSelected(a),v(t.Pk_Tahun_Id))},children:[(0,l.jsx)("option",{value:"",children:"Pilih Tahun"}),p.detailTahun.map(e=>(0,l.jsx)("option",{children:e.tahun},e.Pk_Tahun_Id))]})})]}),""!=p.tahunSelected&&(null===(e=p.dataPejabat[0])||void 0===e?void 0:e.Nama)!=null?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex flex-row w-full my-2 bg-blue-600 p-3 rounded-xl justify-between text-white font-bold",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{children:(0,l.jsx)("h3",{children:"Data Pejabat"})}),(0,l.jsxs)("div",{className:"flex w-full justify-start",children:[" ",(0,l.jsx)("table",{className:"table-auto",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Nama"}),(0,l.jsx)("td",{className:"px-1",children:":"}),(0,l.jsx)("td",{children:null===(a=p.dataPejabat[0])||void 0===a?void 0:a.Nama})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"NIP"}),(0,l.jsx)("td",{className:"px-1",children:":"}),(0,l.jsx)("td",{children:null===(t=p.dataPejabat[0])||void 0===t?void 0:t.Nip})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Jabatan"}),(0,l.jsx)("td",{className:"px-1",children:":"}),(0,l.jsx)("td",{children:null===(c=p.dataPejabat[0])||void 0===c?void 0:c.Jabatan})]})]})})]})]}),(0,l.jsxs)("div",{className:"  justify-center flex items-center  p-2",children:[(0,l.jsx)("div",{onClick:()=>{p.setPopUpEdit(!0)},className:"bg-blue-400 p-2 rounded-lg",children:"Edit Data Pejabat"}),(0,l.jsx)("div",{onClick:()=>y(),className:"bg-blue-400 p-2 ml-2 rounded-lg",children:(0,l.jsx)(b.yf7,{className:"h-6 w-6 "})})]})]})}):""==p.tahunSelected&&(null===(u=p.dataPejabat[0])||void 0===u?void 0:u.Nama)==null?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)("div",{className:"flex flex-row w-full my-2 bg-blue-600 p-3 rounded-xl text-white font-bold justify-between",children:[(0,l.jsx)("div",{children:"Data Pejabat Belum Diisi"}),(0,l.jsx)("div",{className:"bg-blue-400 rounded-lg p-2",onClick:()=>{p.setPopUpAdd(!0)},children:"Tambah Data Jabatan"})]}),(0,l.jsx)("div",{className:"flex flex-col w-full",children:(0,l.jsx)(o.ZP,{columns:w,data:(null==p?void 0:p.dataTable)||[],responsive:!0,expandableRows:!0,expandableRowsComponent:e=>{let{data:a}=e,t=p.headerDataIndikatorSasaranPD.map((e,a)=>{switch(e.toLowerCase()){case"no":return{name:e,wrap:!0,width:"10%",selector:(e,a)=>a+1};case"indikator sasaran perangkat daerah":return{name:e,wrap:!0,selector:e=>e.Indikator_sasaran_pd};case"target":return{name:e,wrap:!0,selector:e=>e.Target}}});return(0,l.jsx)("div",{style:{paddingTop:"10px",paddingLeft:"20px"},children:(0,l.jsx)(o.ZP,{columns:t,data:a.Indikator||[],pagination:!0,customStyles:x,responsive:!0})})},pagination:!0,customStyles:x})})]})})]})}},5447:function(e,a,t){"use strict";var l=t(7437);t(2265),a.Z=e=>{let{text:a,className:t}=e;return(0,l.jsx)("button",{className:"bg-blue-500 font-button hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-sm transition-colors ".concat(t),type:"submit",children:a})}},6409:function(e,a,t){"use strict";var l=t(2265);a.Z=()=>{let[e,a]=(0,l.useState)(!1);return{modal:{isVisibleSmall:e,setIsVisibleSmall:a,onCloseSmall:()=>a(!1)},visible:e,setVisible:a}}},710:function(e,a,t){"use strict";var l=t(7437),s=t(6409),r=t(5097);a.Z=e=>{let{isVisibleSmall:a,setIsVisibleSmall:t,onCloseSmall:n,children:o,title:i}=e;return(0,s.Z)(),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"\n          ".concat(a?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50  h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,l.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"}),(0,l.jsxs)("div",{className:" h-screen flex lg:w-[40%] w-full flex-col ",children:[(0,l.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"}),(0,l.jsxs)("div",{className:"h-full relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,l.jsxs)("div",{onClick:()=>n(),className:"z-10 h-[10%] flex justify-between items-center p-3 cursor-pointer rounded-md bg-blue-500 text-white w-full",children:[(0,l.jsx)("h2",{className:"text-lg font-bold",children:i}),(0,l.jsx)(r.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,l.jsx)("div",{className:"overflow-y-auto",children:o})]}),(0,l.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"})]}),(0,l.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"})]})})}},361:function(e,a,t){"use strict";t.d(a,{H:function(){return n}});var l=t(2126);let s="",r=l.Z.create({baseURL:"https://inspektorat-be.agriciatech.com/api/v1"}),n=()=>{let e=localStorage.getItem("token");e&&(s=e,r.defaults.headers.common.Authorization="Bearer ".concat(s))};r.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),a.Z=r},4193:function(){},1436:function(){}},function(e){e.O(0,[396,7679,5706,614,2126,6713,9343,9500,2971,7023,1744],function(){return e(e.s=2189)}),_N_E=e.O()}]);
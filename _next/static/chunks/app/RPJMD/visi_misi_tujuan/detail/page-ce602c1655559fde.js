(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{8852:function(e,s,a){Promise.resolve().then(a.bind(a,4507))},4507:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return w}});var t=a(7437),r=a(681),l=a(2265),i=a(361),o=()=>{let[e,s]=(0,l.useState)([]),[a,t]=(0,l.useState)([]),[r,o]=(0,l.useState)([]),[u,n]=(0,l.useState)([]),[d,c]=(0,l.useState)([]),[m,h]=(0,l.useState)([]),[f,p]=(0,l.useState)([]),[b,x]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[k,y]=(0,l.useState)(!1),[F,w]=(0,l.useState)(0),[N,_]=(0,l.useState)(0),[I,D]=(0,l.useState)(""),v=async()=>{try{let e=await i.Z.get("/formulir1/formulir-tujuan-indikator",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(200===e.status){let s=e.data.data,a=["Aksi","Satuan Indikator",...["KA1","KA2","T1","T2","T3","T4","T5"].map(e=>"Tahun ".concat(s[e]))];console.log("Updated Header Data:",a),o(a)}}catch(e){console.log("Error fetching users:",e)}};return(0,l.useEffect)(()=>{v()},[]),{headerData:["Visi","Misi","Tujuan","Indikator"],headerDataDetail:r,dataTable:e,setDataTable:s,dataTableDetail:a,setDataTableDetail:t,record:u,handleAddFormulir:()=>{x(!0)},setRecord:n,recordDetail:d,recordFormulasi:f,setRecordFormulasi:p,dataTableFormulasi:m,setDataTableFormulasi:h,setRecordDetail:c,headerDataFormulasi:["No","Aksi","Formulasi Tujuan","Deskripsi","Sumber Data","Periode Pengukuran"],isVisibleAddFormulasi:b,isVisibleDeleteFormulasi:j,isVisibleEditFormulasi:k,setIsVisibleAddFormulasi:x,setIsVisibleDeleteFormulasi:g,setIsVisibleEditFormulasi:y,idFormulasi:F,nomor:N,setNomor:_,params:I,setParams:D,setIdFormulasi:w,handleDeleteFormulasi:e=>{g(!0),w(e)},handleEditFormulasi:e=>{y(!0),w(e)}}},u=a(6356),n=a(710),d=a(3051),c=a(9219),m=a(786),h=a(1641),f=a(5447),p=a(9343),b=a(3580);a(4193),a(9071);let x=e=>{let{register:s,handleSubmit:a,formState:{errors:r},reset:o}=(0,p.cI)(),u=(0,l.useRef)(null);(0,l.useEffect)(()=>{u.current&&u.current.focus()},[]),console.log("tujuan",e.Id_Tujuan);let[n,d]=(0,l.useState)(""),c=async s=>{let{formulasi_tujuan:a,Deskripsi:t,sumebr_data:r,priode_pengukuran:l,Fk_IndiatorTujuan:u}=s;console.log("data",s);let n=parseInt(e.Id_Tujuan);try{let s=await i.Z.post("/FormulasiTujuan",{formulasi_tujuan:a,Deskripsi:t,sumebr_data:r,priode_pengukuran:l,Fk_IndiatorTujuan:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200===s.status&&(d(""),e.data(),b.Am.success("Indikator Berhasil Dibuat!",{position:"top-right"}),e.setVisible(!1),o())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";d(e),b.Am.error(e,{position:"top-right"}),o()}else if(e.response&&403===e.response.status){let e="Gagal menambahkan Indikator!";d(e),b.Am.error(e,{position:"top-right"}),o()}else{console.log(e);let s="Gagal membuat indikator!,  ".concat(e.message);d(s),b.Am.error(s,{position:"top-right"}),o()}}};return(0,l.useEffect)(()=>{e.isVisible||o()},[e.isVisible,o]),(0,t.jsx)("div",{className:"w-full h-full  px-4",children:(0,t.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:a(c),children:[(0,t.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,t.jsx)("label",{htmlFor:"formulasi_tujuan",className:"block mb-2 required",children:"Formulasi Tujuan"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.formulasi_tujuan?"border-red-500":"border-gray-300"),type:"text",id:"formulasi_tujuan",...s("formulasi_tujuan",{required:"Formulasi Tujuan is required."}),placeholder:"Enter your Formulasi Tujuan"}),r.formulasi_tujuan&&(0,t.jsx)("p",{className:"text-red-500",children:r.formulasi_tujuan.message}),(0,t.jsx)("label",{htmlFor:"Deskripsi",className:"block mb-2 required",children:"Deskripsi"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.Deskripsi?"border-red-500":"border-gray-300"),type:"text",id:"Deskripsi",...s("Deskripsi",{required:"Deskripsi is required."}),placeholder:"Enter your Deskripsi"}),r.Deskripsi&&(0,t.jsx)("p",{className:"text-red-500",children:r.Deskripsi.message}),(0,t.jsx)("label",{htmlFor:"sumebr_data",className:"block mb-2 required",children:"Sumber Data"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.sumebr_data?"border-red-500":"border-gray-300"),type:"text",id:"sumebr_data",...s("sumebr_data",{required:"Sumber Data is required."}),placeholder:"Enter your Sumber Data"}),r.sumebr_data&&(0,t.jsx)("p",{className:"text-red-500",children:r.sumebr_data.message}),(0,t.jsx)("label",{htmlFor:"priode_pengukuran",className:"block mb-2 required",children:"Periode Pengukuran"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.priode_pengukuran?"border-red-500":"border-gray-300"),type:"text",id:"priode_pengukuran",...s("priode_pengukuran",{required:"Periode Pengukuran is required."}),placeholder:"Enter your Periode Pengukuran"}),r.priode_pengukuran&&(0,t.jsx)("p",{className:"text-red-500",children:r.priode_pengukuran.message}),(0,t.jsx)("input",{type:"hidden",id:"Fk_IndiatorTujuan",value:e.Id_Tujuan,...s("Fk_IndiatorTujuan")})]}),(0,t.jsx)("div",{className:"py-5 flex flex-col",children:(0,t.jsx)(f.Z,{text:"Tambah Formulasi",className:"h-10"})})]})})};var j=a(4200),g=a(8079),k=a(7702);let y=e=>{console.log("yahaha",e.id);let s=async()=>{try{await i.Z.delete("/FormulasiTujuan/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(s=>{200===s.status&&(e.setVisible(!1),b.Am.success("Formulasi berhasil dihapus",{position:"top-right"}),e.data())})}catch(e){console.log(e),b.Am.error("Misi gagal dihapus",{position:"top-right"})}};return(0,t.jsx)("div",{className:"w-full py-10  h-full flex px-4",children:(0,t.jsxs)("div",{className:"relative  flex-col mt-[1rem]  w-full h-full bg-red-blue flex justify-center items-start",children:[(0,t.jsx)("h1",{className:"font-semibold text-lg",children:"Apakah anda yakin ingin menghapus formulasi nomor ".concat(e.nomor," ?")}),(0,t.jsxs)("div",{className:"pt-10 flex w-full justify-end  ",children:[(0,t.jsx)(k.Z,{onClick:s,text:"Hapus",className:"mr-2"}),(0,t.jsx)(g.Z,{onClick:()=>e.setVisible(!1),className:"text-white",text:"Batal"})]})]})})},F=e=>{let{register:s,handleSubmit:a,formState:{errors:r},setValue:o}=(0,p.cI)({defaultValues:{formulasi_tujuan:"",Deskripsi:"",sumebr_data:"",priode_pengukuran:"",Fk_IndiatorTujuan:parseInt(e.nomor)}});console.log("cekdata",e.Id_Formulasi,e.nomor),(0,l.useEffect)(()=>{},[e.Id_Formulasi,o]);let u=(0,l.useRef)(null);(0,l.useEffect)(()=>{u.current&&u.current.focus()},[]);let[n,d]=(0,l.useState)(""),c=async s=>{let{formulasi_tujuan:a,Deskripsi:t,sumebr_data:r,priode_pengukuran:l,Fk_IndiatorTujuan:o}=s;console.log("data",s),parseInt(o.toString(),10);try{let s=await i.Z.put("/FormulasiTujuan/".concat(e.Id_Formulasi),{formulasi_tujuan:a,Deskripsi:t,sumebr_data:r,priode_pengukuran:l,Fk_IndiatorTujuan:parseInt(e.nomor)},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200===s.status&&(d(""),e.data(),b.Am.success("Indikator Berhasil Diperbarui!",{position:"top-right"}),e.setVisible(!1))}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";d(e),b.Am.error(e,{position:"top-right"})}else if(e.response&&403===e.response.status){let e="Gagal memperbarui Indikator!";d(e),b.Am.error(e,{position:"top-right"})}else{console.log(e);let s="Gagal memperbarui indikator!, ".concat(e.message);d(s),b.Am.error(s,{position:"top-right"})}}};return(0,l.useEffect)(()=>{e.isVisible},[e.isVisible]),(0,t.jsx)("div",{className:"w-full h-full px-4",children:(0,t.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:a(c),children:[(0,t.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,t.jsx)("label",{htmlFor:"formulasi_tujuan",className:"block mb-2 required",children:"Formulasi Tujuan"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.formulasi_tujuan?"border-red-500":"border-gray-300"),type:"text",id:"formulasi_tujuan",...s("formulasi_tujuan",{required:"Formulasi Tujuan is required."}),placeholder:"Enter your Formulasi Tujuan"}),r.formulasi_tujuan&&(0,t.jsx)("p",{className:"text-red-500",children:r.formulasi_tujuan.message}),(0,t.jsx)("label",{htmlFor:"Deskripsi",className:"block mb-2 required",children:"Deskripsi"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.Deskripsi?"border-red-500":"border-gray-300"),type:"text",id:"Deskripsi",...s("Deskripsi",{required:"Deskripsi is required."}),placeholder:"Enter your Deskripsi"}),r.Deskripsi&&(0,t.jsx)("p",{className:"text-red-500",children:r.Deskripsi.message}),(0,t.jsx)("label",{htmlFor:"sumebr_data",className:"block mb-2 required",children:"Sumber Data"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.sumebr_data?"border-red-500":"border-gray-300"),type:"text",id:"sumebr_data",...s("sumebr_data",{required:"Sumber Data is required."}),placeholder:"Enter your Sumber Data"}),r.sumebr_data&&(0,t.jsx)("p",{className:"text-red-500",children:r.sumebr_data.message}),(0,t.jsx)("label",{htmlFor:"priode_pengukuran",className:"block mb-2 required",children:"Periode Pengukuran"}),(0,t.jsx)("input",{className:"border rounded-md w-full px-3 py-2 mb-2 focus:outline-none focus:border-blue-500 ".concat(r.priode_pengukuran?"border-red-500":"border-gray-300"),type:"text",id:"priode_pengukuran",...s("priode_pengukuran",{required:"Periode Pengukuran is required."}),placeholder:"Enter your Periode Pengukuran"}),r.priode_pengukuran&&(0,t.jsx)("p",{className:"text-red-500",children:r.priode_pengukuran.message}),(0,t.jsx)("input",{type:"hidden",id:"Fk_IndiatorTujuan",value:e.Id_Formulasi,...s("Fk_IndiatorTujuan")})]}),(0,t.jsx)("div",{className:"py-5 flex flex-col",children:(0,t.jsx)(f.Z,{text:"Edit Indikator",className:"h-10"})})]})})};var w=()=>{let e=o(),s=localStorage.getItem("detailFormulasi"),a=(0,c.Z)(),f=e.headerData.map(e=>{let s="auto";switch(e.length>15&&(s="".concat(8*e.length,"px")),e.toLowerCase()){case"visi":return{name:e,selector:e=>e.visi,width:s};case"misi":return{name:e,selector:e=>e.misi,width:s};case"tujuan":return{name:e,selector:e=>e.tujuan,width:s};case"indikator":return{name:e,selector:e=>e.indikator_tujuan,width:s};default:return null}}).filter(Boolean),p=e.headerDataFormulasi.map(a=>{let r="auto";switch(a.length>15&&(r="".concat(8*a.length,"px")),a.toLowerCase()){case"no":return{name:a,selector:(e,s)=>s+1,width:r};case"aksi":return{name:a,cell:(a,r)=>(0,t.jsxs)("div",{className:"flex flex-row justify-around w-full",children:[(0,t.jsx)(d.AWu,{style:{cursor:"pointer"},className:"text-red-500 w-5 h-5",onClick:()=>[e.handleDeleteFormulasi(a.Pk_FormulasiTujuan_Id),e.setNomor(r+1)]}),(0,t.jsx)(u.zmo,{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>[e.handleEditFormulasi(a.Pk_FormulasiTujuan_Id),e.setParams(s.id),console.log("Yahaha hallow",a.Pk_FormulasiTujuan_Id)],className:"text-blue-500 w-5 h-5"})]}),ignoreRowClick:!0,button:!0};case"formulasi tujuan":return{name:a,selector:e=>e.formulasi_tujuan,width:r};case"deskripsi":return{name:a,selector:e=>e.deskripsi,width:r};case"sumber data":return{name:a,selector:e=>e.sumebr_data,width:r};case"periode pengukuran":return{name:a,selector:e=>e.priode_pengukuran,width:r};default:return null}}).filter(Boolean),b=e.headerDataDetail.map(e=>{let r="auto";if(e.length>15&&(r="".concat(8*e.length,"px")),"aksi"===e.toLocaleLowerCase())return{name:e,cell:e=>(0,t.jsx)("div",{className:"flex flex-row justify-around w-full",children:(0,t.jsx)(u.zmo,{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>a.handleEditIndikator(s),className:"text-blue-500 w-5 h-5"})}),ignoreRowClick:!0,button:!0};if("satuan indikator"===e.toLocaleLowerCase())return{name:e,selector:e=>(console.log("Row satuan value:",e.satuan),e.satuan),width:r};{let s=e.replace("Tahun ","");return{name:e,selector:e=>{let a=e.kondisi.find(e=>e.Tahun===s);return a?a.Nilai:"-"},width:r}}}).filter(Boolean),g=async()=>{try{let a=await i.Z.get("/formulir1/information/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Fetch Data Response:",a.data),e.setDataTable([a.data]),e.setRecord([a.data])}catch(e){console.log("Error fetching users:",e)}},k=async()=>{try{let a=await i.Z.get("/formulir1/konsisi-indikator/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Fetch Data Detail Response:",a.data),e.setDataTableDetail([a.data]),e.setRecordDetail([a.data])}catch(e){console.log("Error fetching users:",e)}},w=async()=>{try{let a=await i.Z.get("/FormulasiTujuan/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Fetch Data Formulasi Response:",a.data.data),e.setDataTableFormulasi(a.data.data),e.setRecordFormulasi(a.data.data)}catch(e){console.log("Error fetching users:",e)}};return(0,l.useEffect)(()=>{g(),k(),w()},[]),console.log("Record:",e.record),console.log("Record Detail:",e.recordDetail),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{isVisibleConfirm:e.isVisibleDeleteFormulasi,setIsVisibleConfirm:e.setIsVisibleDeleteFormulasi,onCloseConfirm:()=>e.setIsVisibleDeleteFormulasi(!1),children:(0,t.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,t.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Delete Formulasi"}),(0,t.jsx)("div",{className:"w-full h-full ",children:(0,t.jsx)(y,{id:e.idFormulasi,data:w,nomor:e.nomor,setVisible:e.setIsVisibleDeleteFormulasi,isVisible:e.isVisibleDeleteFormulasi})})]})}),(0,t.jsx)(n.Z,{isVisibleSmall:a.isVisibleEditModalIndikator,setIsVisibleSmall:a.setIsVisibleEditModalIndikator,onCloseSmall:()=>a.setIsVisibleEditModalIndikator(!1),children:(0,t.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,t.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Indikator"}),(0,t.jsx)("div",{className:"w-full h-full ",children:(0,t.jsx)(m.m,{Id_Indikator:s,data:k,setVisible:a.setIsVisibleEditModalIndikator,isVisible:a.isVisibleEditModalIndikator})})]})}),(0,t.jsx)(n.Z,{isVisibleSmall:e.isVisibleEditFormulasi,setIsVisibleSmall:e.setIsVisibleEditFormulasi,onCloseSmall:()=>e.setIsVisibleEditFormulasi(!1),children:(0,t.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,t.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Indikator"}),(0,t.jsx)("div",{className:"w-full h-full ",children:(0,t.jsx)(F,{Id_Formulasi:e.idFormulasi,data:w,nomor:e.params,setVisible:e.setIsVisibleEditFormulasi,isVisible:e.isVisibleEditFormulasi})})]})}),"nomor=",e.params,(0,t.jsx)(n.Z,{isVisibleSmall:e.isVisibleAddFormulasi,setIsVisibleSmall:e.setIsVisibleAddFormulasi,onCloseSmall:()=>e.setIsVisibleAddFormulasi(!1),children:(0,t.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,t.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Indikator"}),(0,t.jsx)("div",{className:"w-full h-full ",children:(0,t.jsx)(x,{Id_Tujuan:s,data:w,setVisible:e.setIsVisibleAddFormulasi,isVisible:e.isVisibleAddFormulasi})})]})}),(0,t.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,t.jsx)("div",{className:"mt-[10vh] overflow-y-auto w-full items-center flex h-full flex-col",children:(0,t.jsxs)("div",{className:"lg:px-8 px-3 w-full h-full",children:[(0,t.jsx)("div",{className:"w-full justify-between items-center py-7 flex flex-row",children:(0,t.jsx)("h1",{className:"text-[#408EFD] text-xl font-semibold",children:"Information"})}),(0,t.jsx)(r.ZP,{columns:f,data:e.record,subHeaderComponent:!0,responsive:!0,highlightOnHover:!0}),(0,t.jsx)("div",{className:"w-full justify-between items-center py-7 flex flex-row",children:(0,t.jsx)("h1",{className:"text-[#408EFD] text-xl font-semibold",children:"Kondisi Indikator"})}),(0,t.jsx)(r.ZP,{columns:b,data:e.recordDetail,subHeaderComponent:!0,responsive:!0,highlightOnHover:!0}),(0,t.jsxs)("div",{className:"w-full justify-between items-center py-7 flex flex-row",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-[#408EFD] text-xl font-semibold",children:"Formulasi"})}),(0,t.jsx)("div",{children:(0,t.jsx)(h.Z,{text:"Tambah Detail",onClick:()=>e.handleAddFormulir()})})]}),(0,t.jsx)(r.ZP,{columns:p,data:e.recordFormulasi,subHeaderComponent:!0,responsive:!0,pagination:!0,highlightOnHover:!0})]})})})]})}},1641:function(e,s,a){"use strict";var t=a(7437);a(2265);var r=a(3781);s.Z=e=>{let{text:s,onClick:a,className:l}=e;return(0,t.jsxs)("button",{className:"bg-transparent font-button  outline-2 transition-colors outline-none outline-blue-500 hover:bg-blue-500 text-blue-500 hover:text-white font-bold rounded flex items-center gap-1 ".concat(l),type:"button",onClick:a,children:[(0,t.jsx)(r.B8K,{className:"font-bold"})," ",s]})}},4193:function(){}},function(e){e.O(0,[563,706,779,51,522,126,713,343,580,331,463,971,23,744],function(){return e(e.s=8852)}),_N_E=e.O()}]);
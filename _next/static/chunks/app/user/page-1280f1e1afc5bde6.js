(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{9904:function(e,s,l){Promise.resolve().then(l.bind(l,6690))},6690:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return k}});var r=l(3827),a=l(4090),t=l(8501),o=l(7032),i=()=>({header:["Username","Nama","Email","Role","Aksi"]}),n=l(997),c=l(784),d=l(1975),u=e=>{let{text:s,onClick:l,className:a}=e;return(0,r.jsxs)("button",{className:"bg-transparent font-button  outline-2 transition-colors outline-none outline-blue-500 hover:bg-blue-500 text-blue-500 hover:text-white font-bold rounded flex items-center gap-1 ".concat(a),type:"button",onClick:l,children:[(0,r.jsx)(d.B8K,{})," ",s]})},m=l(4251),x=l(2016),h=l(3520),f=l(2670),b=l(6123);l(8062);var p=l(1399);l(6134);let g=e=>{let{register:s,handleSubmit:l,formState:{errors:o},reset:i}=(0,f.cI)(),n=(0,a.useRef)(null);(0,a.useEffect)(()=>{n.current&&n.current.focus()},[]);let[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)([]),[x,g]=(0,a.useState)(""),j=async s=>{let{Username:l,Email:r,Password:a,Name:o,Fk_role:n}=s,c=parseInt(n);console.log(s);try{let s=await t.Z.post("/users",{Username:l,Name:o,Email:r,Password:a,Fk_role:c},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200===s.status&&(g(""),e.data(),b.Am.success("Akun Berhasil Dibuat!",{position:"top-right"}),e.setVisible(!1),i())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";g(e),b.Am.error(e,{position:"top-right"}),i()}else if(e.response&&403===e.response.status){let e="User tidak aktif atau user tidak memiliki role, silahkan hubungi admin";g(e),b.Am.error(e,{position:"top-right"}),i()}else{console.log("Status respons lainnya:",e.message);let s="Gagal membuat akun!,  ".concat(e.message);g(s),b.Am.error(s,{position:"top-right"}),i()}}},N=async()=>{try{await t.Z.get("/roles",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{if(e.data&&Array.isArray(e.data.data)){let s=e.data.data;m(s),console.log("role",s)}console.log("role",e.data.data)})}catch(e){console.log(e)}};return(0,a.useEffect)(()=>{N(),e.isVisible||i()},[e.isVisible,i]),(0,r.jsx)("div",{className:"w-full h-full  px-4",children:(0,r.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:l(j),children:[(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Username",className:"block mb-1 required",children:"Username"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(o.Username?"border-red-500":"border-gray-300"),type:"text",id:"Username",...s("Username",{required:"Username is required."}),placeholder:"Enter your username"}),o.Username&&(0,r.jsx)("p",{className:"text-red-500",children:o.Username.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Name",className:"block mb-1 required",children:"Name"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(o.Name?"border-red-500":"border-gray-300"),type:"text",id:"Name",...s("Name",{required:"Name is required."}),placeholder:"Enter your Name"}),o.Name&&(0,r.jsx)("p",{className:"text-red-500",children:o.Name.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block mb-1 required",children:"Email"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(o.Email?"border-red-500":"border-gray-300"),type:"text",id:"Email",...s("Email",{required:"Email is required."}),placeholder:"Enter your Email"}),o.Email&&(0,r.jsx)("p",{className:"text-red-500",children:o.Email.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Password",className:"block mb-1 required",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(o.Password?"border-red-500":"border-gray-300"),type:c?"text":"password",id:"Password",...s("Password",{required:"Password is required."}),placeholder:"Enter your Password"}),(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?(0,r.jsx)(p.tgn,{className:"w-4 h-4 cursor-pointer",onClick:()=>d(!1)}):(0,r.jsx)(p.dSq,{className:"w-4 h-4 cursor-pointer",onClick:()=>d(!0)})})]}),o.Password&&(0,r.jsx)("p",{className:"text-red-500",children:o.Password.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Fk_role",className:"block mb-1 required",children:"Role"}),(0,r.jsxs)("select",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(o.Fk_role?"border-red-500":"border-gray-300"),id:"Fk_role",...s("Fk_role",{required:"Role is required."}),children:[(0,r.jsx)("option",{value:"",children:"Pilih Role"}),u.map((e,s)=>(0,r.jsx)("option",{value:e.Pk_Role_Id,children:e.role},s))]}),o.Fk_role&&(0,r.jsx)("p",{className:"text-red-500",children:o.Fk_role.message})]}),(0,r.jsx)("div",{className:"py-5 flex flex-col",children:(0,r.jsx)(h.Z,{text:"Tambah User",className:"h-10"})})]})})},j=e=>{let{register:s,handleSubmit:l,setValue:o,formState:{errors:i},reset:n}=(0,f.cI)({defaultValues:{Username:"",Email:"",Name:"",Fk_role:""}});(0,a.useEffect)(()=>{(async()=>{try{let s=(await t.Z.get("/users/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data;o("Username",s.username),o("Email",s.email),o("Name",s.name),o("Fk_role","".concat(null==s.Fk_Role||""==s.Fk_Role?"Pilih Data":s.Fk_Role))}catch(e){console.error("Failed to fetch user data:",e)}})()},[e.id,o]);let c=(0,a.useRef)(null);(0,a.useEffect)(()=>{c.current&&c.current.focus()},[]);let[d,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(""),j=async s=>{let{Username:l,Email:r,Name:a,Fk_role:o}=s,i=parseInt(o);console.log(s);try{let s=await t.Z.put("/users/".concat(e.id),{Username:l,Email:r,Name:a,Fk_role:i},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200===s.status&&(g(""),b.Am.success("Akun Berhasil Diupdate!",{position:"top-right"}),e.data(),e.setVisible(!1),n())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";g(e),b.Am.error(e,{position:"top-right"})}else if(e.response&&403===e.response.status){let e="User tidak aktif atau user tidak memiliki role, silahkan hubungi admin";g(e),b.Am.error(e,{position:"top-right"})}else{console.log("Status respons lainnya:",e.message);let s="Gagal membuat akun!,  ".concat(e.message);g(s),b.Am.error(s,{position:"top-right"})}}},N=async()=>{try{await t.Z.get("/roles",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{if(e.data&&Array.isArray(e.data.data)){let s=e.data.data;x(s),console.log("role",s)}console.log("role",e.data.data)})}catch(e){console.log(e)}};return(0,a.useEffect)(()=>{N()},[]),(0,r.jsx)("div",{className:"w-full h-full  px-4",children:(0,r.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:l(j),children:[(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Username",className:"block mb-1 required",children:"Username"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(i.Username?"border-red-500":"border-gray-300"),type:"text",id:"Username",...s("Username",{required:"Username is required."}),placeholder:"Enter your username"}),i.Username&&(0,r.jsx)("p",{className:"text-red-500",children:i.Username.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Name",className:"block mb-1 required",children:"Name"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(i.Name?"border-red-500":"border-gray-300"),type:"text",id:"Name",...s("Name",{required:"Name is required."}),placeholder:"Enter your Name"}),i.Name&&(0,r.jsx)("p",{className:"text-red-500",children:i.Name.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block mb-1 required",children:"Email"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(i.Email?"border-red-500":"border-gray-300"),type:"text",id:"Email",...s("Email",{required:"Email is required."}),placeholder:"Enter your Email"}),i.Email&&(0,r.jsx)("p",{className:"text-red-500",children:i.Email.message})]}),(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Fk_role",className:"block mb-1 required",children:"Role"}),(0,r.jsx)("select",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(i.Fk_role?"border-red-500":"border-gray-300"),id:"Fk_role",...s("Fk_role",{required:"Role is required."}),children:m.map((e,s)=>(0,r.jsx)("option",{value:e.Pk_Role_Id,children:e.role},s))}),i.Fk_role&&(0,r.jsx)("p",{className:"text-red-500",children:i.Fk_role.message})]}),(0,r.jsx)("div",{className:"py-5 flex flex-col",children:(0,r.jsx)(h.Z,{text:"Update User",className:"h-10"})})]})})};var N=l(3170),y=l(8703);let w=e=>{let[s,l]=(0,a.useState)("");console.log("yahaha",e.id);let o=async()=>{try{let s=await t.Z.get("/users/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});l(s.data.username),console.log("User berhasil diambil:",s.data.username)}catch(e){console.log("Gagal mengambil user:",e),l("")}},i=async()=>{try{await t.Z.delete("/users/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(s=>{200===s.status&&(e.setVisible(!1),b.Am.success("User berhasil dihapus",{position:"top-right"}),e.data())})}catch(e){console.log(e),b.Am.error("User gagal dihapus",{position:"top-right"})}};return(0,a.useEffect)(()=>{o()},[e.id]),(0,r.jsx)("div",{className:"w-full py-10  h-full flex px-4",children:(0,r.jsxs)("div",{className:"relative  flex-col mt-[1rem]  w-full h-full bg-red-blue flex justify-center items-start",children:[(0,r.jsx)("h1",{className:"font-semibold text-lg",children:"Apakah anda yakin ingin menghapus user ".concat(s," ?")}),(0,r.jsxs)("div",{className:"pt-10 flex w-full justify-end  ",children:[(0,r.jsx)(y.Z,{onClick:i,text:"Hapus",className:"mr-2"}),(0,r.jsx)(N.Z,{onClick:()=>e.setVisible(!1),className:"text-white",text:"Batal"})]})]})})};var k=()=>{let[e,s]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),{header:b}=i(),[p,N]=(0,a.useState)([]),[y,k]=(0,a.useState)([]),v=b.map(e=>"id"===e.toLowerCase()?{name:e,selector:e=>e.Id,sortable:!0}:"username"===e.toLowerCase()?{name:e,selector:e=>e.username,sortable:!0}:"nama"===e.toLowerCase()?{name:e,selector:e=>e.name,sortable:!0}:"email"===e.toLowerCase()?{name:e,selector:e=>e.email,sortable:!0}:"role"===e.toLowerCase()?{name:e,selector:e=>e.Role.role,sortable:!0}:"aksi"===e.toLowerCase()?{name:e,cell:e=>(0,r.jsxs)("div",{className:"flex flex-row justify-around w-full",children:[(0,r.jsx)(n.AWu,{style:{cursor:"pointer"},className:"text-red-500 w-5 h-5",onClick:()=>C(e.Id)}),(0,r.jsx)(c.zmo,{style:{cursor:"pointer",marginRight:"10px"},onClick:()=>S(e.Id),className:"text-blue-500 w-5 h-5"})]}),ignoreRowClick:!0,button:!0}:{name:e,selector:s=>s[e.toLowerCase()],sortable:!0}),E=async()=>{try{console.log("Fetching users...");let e=await t.Z.get("/users",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("Response received:",e.data.data),N(e.data.data),k(e.data.data)}catch(e){console.log("Error fetching users:",e)}},S=e=>{console.log("Edit user:",e),d(!0),U(e)},[F,U]=(0,a.useState)(1),C=e=>{console.log("Delete user:",e),f(!0),U(e)};return(0,a.useEffect)(()=>{E()},[]),(0,a.useEffect)(()=>{},[y]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{isVisibleSmall:e,setIsVisibleSmall:s,onCloseSmall:()=>s(!1),children:(0,r.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,r.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Tambah User"}),(0,r.jsx)("div",{className:"w-full h-full ",children:(0,r.jsx)(g,{data:E,setVisible:s,isVisible:e})})]})}),(0,r.jsx)(m.Z,{isVisibleSmall:l,setIsVisibleSmall:d,onCloseSmall:()=>d(!1),children:(0,r.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,r.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit User"}),(0,r.jsx)("div",{className:"w-full h-full ",children:(0,r.jsx)(j,{id:F,data:E,setVisible:d,isVisible:l})})]})}),(0,r.jsx)(x.Z,{isVisibleConfirm:h,setIsVisibleConfirm:f,onCloseConfirm:()=>f(!1),children:(0,r.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,r.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Delete User"}),(0,r.jsx)("div",{className:"w-full h-full ",children:(0,r.jsx)(w,{id:F,data:E,setVisible:f,isVisible:h})})]})}),(0,r.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,r.jsx)("div",{className:"mt-[10vh] overflow-y-auto w-full items-center flex h-full flex-col",children:(0,r.jsxs)("div",{className:"lg:px-8 px-3 w-full h-full",children:[(0,r.jsxs)("div",{className:"w-full justify-between items-center py-7 flex flex-row",children:[(0,r.jsx)("label",{className:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white",children:"Search"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,r.jsx)("input",{type:"search",onChange:e=>{let{value:s}=e.target;k(p.filter(e=>e.username.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.Role.role.toLowerCase().includes(s.toLowerCase())))},id:"default-search",className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search..."})]}),(0,r.jsx)(u,{onClick:()=>{s(!e)},text:"Tambah User",className:"h-10"})]}),(0,r.jsx)(o.ZP,{columns:v,data:y,pagination:!0,responsive:!0,highlightOnHover:!0})]})})})]})}},3520:function(e,s,l){"use strict";var r=l(3827);l(4090),s.Z=e=>{let{text:s,className:l}=e;return(0,r.jsx)("button",{className:"bg-blue-500 font-button hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition-colors ".concat(l),type:"submit",children:s})}},8062:function(){},6134:function(){}},function(e){e.O(0,[706,779,522,51,699,908,32,670,123,275,971,69,744],function(){return e(e.s=9904)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{4274:function(e,t,a){Promise.resolve().then(a.bind(a,690))},690:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var l=a(3827),n=a(4090),s=a(4149),i=a(691),o=a(6706),r=e=>{let{onChange:t}=e,[a,n,r]=(0,i.z)("/evaluator",!1),[c,d,u]=(0,i.z)("/components",!1),[x,f,m]=(0,i.z)("/tahun",!1),p=(e,a)=>{let l=parseInt(e.target.value,10);t(l,a),console.log("option ".concat(a),l)};return(0,l.jsxs)("div",{className:"flex gap-3 ",children:[(0,l.jsx)(o.Z,{dataComponent:(0,l.jsx)(s.Z,{options:a,optionLabel:e=>e.name,optionValue:e=>e.Id,onChange:e=>p(e,"opd"),defaultText:"Pilih opd"}),text:"Memuat dropdown data OPD...",error:r,loading:n}),(0,l.jsx)(o.Z,{dataComponent:(0,l.jsx)(s.Z,{options:x,optionLabel:e=>e.tahun.toString(),optionValue:e=>e.Pk_Tahun_Id,onChange:e=>p(e,"tahun"),defaultText:"Pilih Tahun"}),text:"Memuat dropdown data tahun...",error:m,loading:f}),(0,l.jsx)(o.Z,{dataComponent:(0,l.jsx)(s.Z,{options:c,optionLabel:e=>e.component,optionValue:e=>e.Id.toString(),onChange:e=>p(e,"komponen"),defaultText:"Pilih Komponen Penilaian"}),text:"Memuat dropdown data komponen penilaian...",error:u,loading:d})]})},c=a(7032),d=e=>{let{onClick:t,className:a}=e;return(0,l.jsx)("button",{className:"bg-emerald-500 hover:bg-emerald-700 text-white font-bold py-2 px-3 text-center rounded-full transition-all ".concat(a),type:"button",onClick:t,children:"Approve"})},u=e=>{let{onClick:t,className:a}=e;return(0,l.jsx)("button",{className:"transition-all bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-full ".concat(a),type:"button",onClick:t,children:"Reject"})},x=a(1975),f=a(2016),m=a(8703),p=a(3170),h=a(8241),b=e=>{var t,a,n;let[s,,i,o]=(0,h.Y)("/catatan","post"),r=async()=>{var t;let a={Catatan:"",Verifikasi:"Verified",Fk_Inspeksi:e.Fk_Inspeksi,Fk_Keriteria:null===(t=e.data)||void 0===t?void 0:t.Id};console.log("post data",a),await o(a),e.onCloseModal&&e.onCloseModal()};return(0,l.jsxs)("div",{className:"flex relative justify-center pt-3 h-full items-center flex-col p-2",children:[(0,l.jsx)("div",{className:"w-full items-center flex justify-center",children:"Anda yakin akan approve kriteria"}),(0,l.jsx)("h2",{className:"font-bold text-center",children:null===(t=e.data)||void 0===t?void 0:t.keriteria}),(0,l.jsx)("p",{className:"w-full tex-center text-lg font-bold flex justify-center items-center",children:null===(a=e.data)||void 0===a?void 0:a.Catatan.catatan}),(0,l.jsxs)("div",{className:"button flex gap-2 justify-end items-center w-full mt-6 pt-6 px-2",children:[(0,l.jsx)(m.Z,{text:"Ok",onClick:r}),(0,l.jsx)(p.Z,{text:"Batal",onClick:e.onCloseModal},null===(n=e.data)||void 0===n?void 0:n.Id)]})]})},j=a(4251),g=a(2670),k=e=>{var t;let{register:a,handleSubmit:n,formState:{errors:s},reset:i}=(0,g.cI)(),[o,,r,c]=(0,h.Y)("/catatan","post"),d=async t=>{var a;let l={Catatan:t.catatan,Verifikasi:"tolak",Fk_Inspeksi:e.Fk_Inspeksi,Fk_Keriteria:null===(a=e.data)||void 0===a?void 0:a.Id};console.log("postData",l),await c(l),i(),e.onCloseModal&&e.onCloseModal()};return(0,l.jsx)("div",{className:"flex mt-2 w-full h-full justify-center items-center",children:(0,l.jsxs)("div",{className:"content px-5 py-3 flex flex-col justify-start items-center w-full",children:[(0,l.jsx)("h3",{children:"Anda yakin akan reject kriteria ini"}),(0,l.jsxs)("p",{className:"w-full tex-center text-lg font-bold flex justify-center items-center",children:[null===(t=e.data)||void 0===t?void 0:t.keriteria," ?"]}),(0,l.jsx)("div",{className:"konten flex flex-col justify-start items-center w-full p-3",children:(0,l.jsxs)("form",{onSubmit:n(d),className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"catatan",className:"block mb-1 required",children:"Tambahkan Catatan"}),(0,l.jsx)("input",{type:"text",id:"catatan",placeholder:"Tulis catatan anda...",...a("catatan",{required:"Catatan is required."}),className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.catatan?"border-red-500":"border-gray-300")}),s.catatan&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:s.catatan.message})]})}),(0,l.jsx)(m.Z,{text:"Ok",className:"w-full",onClick:n(d)})]})})},v=a(4139),w=a(9055),N=()=>{let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(11),[o,m]=(0,n.useState)(5),[p,g]=(0,n.useState)(1);console.log("Selected",a,o,p);let[N,y,C]=(0,v.B)("/inspeksis/".concat(a,"/").concat(o)),S=N?N.Id:null,[I,Z,_]=(0,v.B)("components/".concat(p,"/").concat(S),e);console.log("Data Komponen",I);let[F,P]=(0,n.useState)(),[K,V]=(0,n.useState)(),[E,T]=(0,n.useState)(),[A,M,z]=(0,i.z)("/components",!0);(0,n.useEffect)(()=>{console.log("Selected row:",E)},[E]);let[B,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{void 0===a||void 0===o||void 0===p?(D(!0),t(!e)):D(!1)},[a,o,p]);let[O,L]=(0,n.useState)(!1),[R,Y]=(0,n.useState)(!1),q=e=>{L(!0),T(e)},H=e=>{Y(!0),T(e)},[J,U,Q]=(0,i.z)("/predikat",!1),[G,W]=(0,n.useState)(""),[X,$,ee,et]=(0,h.Y)("/penilaian","post"),ea=(a,l)=>{let n={Jawaban:a.target.value,Fk_Inspeksi:S,Fk_SubComponent:l+1};console.log("Update Data",n),et(n),t(!e)},el={headCells:{style:{backgroundColor:"#408EFD",color:"white"}}},en=[{name:"No",selector:e=>e.Id,sortable:!0,width:"7%"},{name:"Kriteria",selector:e=>e.keriteria,sortable:!0,wrap:!0},{name:"Sesuai/Tidak",cell:e=>(0,l.jsx)("div",{className:"flex gap-2 ",children:e.Catatan.catatan?(0,l.jsx)("div",{className:"text-sm bg-red-500 rounded-lg px-2 py-1 text-white",children:(0,l.jsx)("span",{children:"Rejected"})}):"Verified"===e.Catatan.verifikasi?(0,l.jsx)("div",{className:"text-sm bg-green-500 rounded-lg px-2 py-1 text-white",children:(0,l.jsx)("span",{children:"Verified"})}):(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(d,{onClick:()=>q(e)}),(0,l.jsx)(u,{onClick:()=>H(e)})]})}),ignoreRowClick:!0},{name:"Catatan",selector:e=>e.Catatan.catatan,sortable:!0},{name:"No.Kke",cell:e=>(0,l.jsx)("div",{className:"icon p-5",children:(0,l.jsx)("button",{onClick:()=>window.open("".concat(e.KkeKeriteria.Kke.file),"_blank"),children:(0,l.jsx)(x.QNI,{className:"text-lg"})})}),sortable:!0}],es=()=>{Y(!1),L(!1),t(!e)};return(0,l.jsx)("main",{className:"flex bg-[#FAFAFA] w-full flex-col items-start justify-start m-0 p-3 ",children:(0,l.jsxs)("div",{className:"mt-[10vh] overflow-y-auto w-full items-start flex flex-col justify-center h-full",children:[(0,l.jsx)(f.Z,{isVisibleConfirm:O,setIsVisibleConfirm:L,onCloseConfirm:()=>L(!1),title:"Konfirmasi Approve",children:(0,l.jsx)(b,{data:E,onCloseModal:es,Fk_Inspeksi:null==N?void 0:N.Id})}),(0,l.jsx)(j.Z,{isVisibleSmall:R,setIsVisibleSmall:Y,onCloseSmall:()=>Y(!1),title:"Konfirmasi Reject Kriteria",children:(0,l.jsx)(k,{data:E,onCloseModal:es,Fk_Inspeksi:S})}),(0,l.jsxs)("div",{className:"flex flex-col select-area bg-success w-full lg:w-[60%] mb-5",children:[(0,l.jsx)(r,{onChange:(e,t)=>{"komponen"===t?(console.log(e),g(e)):"opd"===t?(console.log(e),s(e)):"tahun"===t&&(console.log(e),m(e))}})," "]}),B?(0,l.jsx)("div",{className:"info mt-5 p-3 bg-green-400 w-full text-white font-bold rounded-lg",children:(0,l.jsx)("p",{children:"Silakan pilih OPD, Tahun dan Komponen Penilian"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"komponen-penilaian items-center flex px-3 justify-between rounded-md bg-white w-full mt-3",children:[(0,l.jsx)("div",{className:"title flex justify-start items-start",children:(0,l.jsx)("p",{className:"text-left font-bold",children:null==I?void 0:I.component})}),(0,l.jsxs)("div",{className:"bobot-nilai flex gap-6",children:[(0,l.jsxs)("div",{className:"bobot flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Bobot"}),(0,l.jsx)("span",{className:"font-bold text-center",children:null==I?void 0:I.bobot})]}),(0,l.jsxs)("div",{className:"nilai flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Nilai"}),(0,l.jsx)("span",{className:"font-bold text-center",children:null==I?void 0:I.nilai})]})]})]}),(0,l.jsx)("div",{children:I&&I.SubKomponen&&I.SubKomponen.map((e,t)=>(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"rincian-komponen-penilaian items-center flex px-3 flex-col justify-between rounded-md bg-white w-full mt-3",children:[(0,l.jsxs)("div",{className:"info-and-jawaban-section flex justify-between w-full gap-2 item-start py-2",children:[(0,l.jsxs)("div",{className:"title flex items-start gap-2 flex-col justify-between",children:[(0,l.jsx)("p",{className:"text-center font-bold",children:e.nama}),(0,l.jsxs)("div",{className:"select-jawaban flex gap-3 items-center ",children:[(0,l.jsx)("p",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white w-100 text-center text-nowrap",children:"Jawaban :"}),(0,l.jsx)(w.Z,{options:J,optionLabel:e=>e.predikat,optionValue:e=>e.predikat,defaultValue:e.Penilaian.jawaban,onChange:e=>ea(e,t),defaultText:"Pilih Predikat..."})]})]}),(0,l.jsxs)("div",{className:"bobot-nilai flex gap-6 text-center",children:[(0,l.jsxs)("div",{className:"bobot flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Bobot"}),(0,l.jsx)("span",{className:"font-bold",children:e.bobot})]}),(0,l.jsxs)("div",{className:"nilai flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Nilai"}),(0,l.jsx)("span",{className:"font-bold",children:e.Penilaian.nilai})]})]})]}),(0,l.jsx)("div",{className:"table-container w-full flex",children:(0,l.jsx)("div",{className:"table w-full",children:(0,l.jsx)(c.ZP,{columns:en,data:e.Keriteria,striped:!0,highlightOnHover:!0,customStyles:el})})})]})},t))})]})]})})}},6706:function(e,t,a){"use strict";var l=a(3827);a(4090),t.Z=e=>{let{loading:t,error:a,dataComponent:n,text:s}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:"bg-slate-500 h-full min-h-[300px] text-white animate-pulse w-full text-sm p-2 rounded-lg flex justify-center items-center text-center mb-5",children:s||"Loading Data..."}):a?(0,l.jsxs)("div",{className:"text-red-700 font-bold text-lg",children:["Error: ",a.message]}):(0,l.jsx)(l.Fragment,{children:n})})}},4149:function(e,t,a){"use strict";var l=a(3827);a(4090),t.Z=e=>{let{options:t,optionLabel:a,optionValue:n,onChange:s,defaultValue:i="",defaultText:o="Pilih ..."}=e;return(0,l.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:s,defaultValue:i,children:[(0,l.jsx)("option",{value:"",disabled:!0,hidden:!0,children:o})," ",t.map(e=>(0,l.jsx)("option",{value:n(e),children:a(e)},n(e)))]})}},9055:function(e,t,a){"use strict";var l=a(3827),n=a(4090);t.Z=e=>{let{options:t,optionLabel:a,optionValue:s,onChange:i,defaultValue:o,defaultText:r="Pilih ..."}=e,[c,d]=(0,n.useState)(o||"");return(0,n.useEffect)(()=>{d(o||"")},[o]),(0,l.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:i,value:c,children:[null===o&&(0,l.jsx)("option",{value:"",children:r}),t.map(e=>(0,l.jsx)("option",{value:s(e),children:a(e)},s(e)))]})}},691:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var l=a(4090),n=a(8501);function s(e,t){let[a,s]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0),[r,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let a=async()=>{try{let t=localStorage.getItem("token"),a=await n.Z.get(e,{headers:{Authorization:"Bearer ".concat(t)}});s(a.data.data)}catch(e){c(e)}finally{o(!1)}};if(t){let e=setInterval(a,5e3);return()=>{clearInterval(e)}}a()},[e,t]),[a,i,r]}},4139:function(e,t,a){"use strict";a.d(t,{B:function(){return s}});var l=a(4090),n=a(8501);function s(e,t){let[a,s]=(0,l.useState)(null),[i,o]=(0,l.useState)(!0),[r,c]=(0,l.useState)(null),[d,u]=(0,l.useState)();return(0,l.useEffect)(()=>{null!=t&&u(t)},[t]),(0,l.useEffect)(()=>((async()=>{try{let t=localStorage.getItem("token"),a=await n.Z.get(e,{headers:{Authorization:"Bearer ".concat(t)}}),l=a.data.data?a.data.data:a.data;s(l)}catch(e){c(e)}finally{o(!1)}})(),()=>{}),[e,d]),[a,i,r]}},8241:function(e,t,a){"use strict";a.d(t,{Y:function(){return i}});var l=a(4090),n=a(8501),s=a(6123);function i(e,t,a){let[i,o]=(0,l.useState)(a||null),[r,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null);return[i,r,d,async a=>{try{let l;c(!0);let i=localStorage.getItem("token"),r={Authorization:"Bearer ".concat(i)};switch(t){case"post":l=await n.Z.post(e,a,{headers:r});break;case"put":l=await n.Z.put(e,a,{headers:r});break;case"delete":l=await n.Z.delete(e,{headers:r});break;default:throw Error("Unsupported HTTP method")}s.Am.success(l.data.message,{position:"top-right"}),o(l.data)}catch(e){u(e)}finally{c(!1)}}]}}},function(e){e.O(0,[706,779,908,32,670,123,275,971,69,744],function(){return e(e.s=4274)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96],{2472:function(e,t,a){Promise.resolve().then(a.bind(a,2367))},2367:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var l=a(7437),n=a(2265),s=a(2546),i=a(6215),r=a(5922),o=e=>{let{onChange:t}=e,a=localStorage.getItem("roleId"),[n,o,c]=(0,r.Y)("1"===a?"/users?role=OPD":"/evaluator",!1),[d,u,x]=(0,r.Y)("/components",!1),[f,m,p]=(0,r.Y)("/tahun",!1),h=(e,a)=>{let l=parseInt(e.target.value,10);t(l,a),console.log("option ".concat(a),l)};return(0,l.jsxs)("div",{className:"flex gap-3 ",children:[(0,l.jsx)(i.Z,{dataComponent:(0,l.jsx)(s.Z,{options:n,optionLabel:e=>e.name,optionValue:e=>e.Id,onChange:e=>h(e,"opd"),defaultText:"Pilih opd"}),text:"Memuat dropdown data OPD...",error:c,loading:o}),(0,l.jsx)(i.Z,{dataComponent:(0,l.jsx)(s.Z,{options:f,optionLabel:e=>e.tahun.toString(),optionValue:e=>e.Pk_Tahun_Id,onChange:e=>h(e,"tahun"),defaultText:"Pilih Tahun"}),text:"Memuat dropdown data tahun...",error:p,loading:m}),(0,l.jsx)(i.Z,{dataComponent:(0,l.jsx)(s.Z,{options:d,optionLabel:e=>e.component,optionValue:e=>e.Id.toString(),onChange:e=>h(e,"komponen"),defaultText:"Pilih Komponen Penilaian"}),text:"Memuat dropdown data komponen penilaian...",error:x,loading:u})]})},c=a(681),d=e=>{let{onClick:t,className:a,disabled:n}=e;return(0,l.jsx)("button",{className:"bg-emerald-500 ".concat(n?"bg-gray-400":"bg-green-500"," hover:bg-emerald-700 text-white font-bold py-2 px-3 text-center rounded-full transition-all ").concat(a),type:"button",onClick:t,disabled:n,children:"Approve"})},u=e=>{let{onClick:t,className:a,disabled:n}=e;return(0,l.jsx)("button",{className:"transition-all ".concat(n?"bg-gray-400":"bg-green-500"," bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-full ").concat(a),type:"button",onClick:t,disabled:n,children:"Reject"})},x=a(3781),f=a(4200),m=a(9343),p=a(7702),h=a(9938),b=e=>{var t;let{register:a,handleSubmit:n,formState:{errors:s},reset:i}=(0,m.cI)(),[r,,o,c]=(0,h.Y)("/catatan","post"),d=async t=>{var a;let l={Catatan:t.catatan,Verifikasi:"Verified",Fk_Inspeksi:e.Fk_Inspeksi,Fk_Keriteria:null===(a=e.data)||void 0===a?void 0:a.Id};console.log("postData",l),await c(l),i(),e.onCloseModal&&e.onCloseModal()};return(0,l.jsx)("div",{className:"flex mt-2 w-full h-full justify-center items-center",children:(0,l.jsxs)("div",{className:"content px-5 py-3 flex flex-col justify-start items-center w-full",children:[(0,l.jsx)("h3",{children:"Anda yakin akan approve kriteria ini"}),(0,l.jsxs)("p",{className:"w-full tex-center text-lg font-bold flex justify-center items-center",children:[null===(t=e.data)||void 0===t?void 0:t.keriteria," ?"]}),(0,l.jsx)("div",{className:"konten flex flex-col justify-start items-center w-full p-3",children:(0,l.jsxs)("form",{onSubmit:n(d),className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"catatan",className:"block mb-1 required",children:"Tambahkan Catatan"}),(0,l.jsx)("input",{type:"text",id:"catatan",placeholder:"Tulis catatan anda...",...a("catatan",{required:"Catatan is required."}),className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.catatan?"border-red-500":"border-gray-300")}),s.catatan&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:s.catatan.message})]})}),(0,l.jsx)(p.Z,{text:"Ok",className:"w-full",onClick:n(d)})]})})},g=a(710),j=e=>{var t;let{register:a,handleSubmit:n,formState:{errors:s},reset:i}=(0,m.cI)(),[r,,o,c]=(0,h.Y)("/catatan","post"),d=async t=>{var a;let l={Catatan:t.catatan,Verifikasi:"Ditolak",Fk_Inspeksi:e.Fk_Inspeksi,Fk_Keriteria:null===(a=e.data)||void 0===a?void 0:a.Id};console.log("postData",l),await c(l),i(),e.onCloseModal&&e.onCloseModal()};return(0,l.jsx)("div",{className:"flex mt-2 w-full h-full justify-center items-center",children:(0,l.jsxs)("div",{className:"content px-5 py-3 flex flex-col justify-start items-center w-full",children:[(0,l.jsx)("h3",{children:"Anda yakin akan reject kriteria ini"}),(0,l.jsxs)("p",{className:"w-full tex-center text-lg font-bold flex justify-center items-center",children:[null===(t=e.data)||void 0===t?void 0:t.keriteria," ?"]}),(0,l.jsx)("div",{className:"konten flex flex-col justify-start items-center w-full p-3",children:(0,l.jsxs)("form",{onSubmit:n(d),className:"w-full",children:[(0,l.jsx)("label",{htmlFor:"catatan",className:"block mb-1 required",children:"Tambahkan Catatan"}),(0,l.jsx)("input",{type:"text",id:"catatan",placeholder:"Tulis catatan anda...",...a("catatan",{required:"Catatan is required."}),className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.catatan?"border-red-500":"border-gray-300")}),s.catatan&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:s.catatan.message})]})}),(0,l.jsx)(p.Z,{text:"Ok",className:"w-full",onClick:n(d)})]})})},k=a(288),v=a(5039),w=e=>{let[t,,a,n]=(0,h.Y)("/catatan","post"),s=async()=>{var t;let a={Catatan:"",Verifikasi:"",Fk_Inspeksi:e.Fk_Inspeksi,Fk_Keriteria:null===(t=e.data)||void 0===t?void 0:t.Id};await n(a),e.onCloseModal&&e.onCloseModal()};return(0,l.jsx)("div",{className:"flex mt-2 w-full h-full justify-center items-center",children:(0,l.jsxs)("div",{className:"content px-5 py-3 flex flex-col justify-between items-center w-full gap-5",children:[(0,l.jsx)("h3",{className:"font-bold text-xl text-center",children:"Are you sure you want to clear the note and reset the verification?"}),(0,l.jsx)(p.Z,{text:"Ok",className:"w-full",onClick:s})]})})},y=()=>{let[e,t]=(0,n.useState)("");(0,n.useEffect)(()=>{{let e=window.localStorage.getItem("roleId");null!==e?t(e):console.error("roleId tidak tersedia di local storage")}},[]);let[a,s]=(0,n.useState)(!1),[i,m]=(0,n.useState)(),[p,y]=(0,n.useState)(),[N,C]=(0,n.useState)(),[S,I]=(0,n.useState)(),[F,_]=(0,n.useState)(),[K,Z,P]=(0,v.c)("/inspeksis/".concat(N,"/").concat(S),!1,a),V=K?K.Id:null,[E,T,A]=(0,v.c)("components/".concat(F,"/").concat(V),!1,a);console.log("Data Komponen",E);let[M,D]=(0,n.useState)(),[Y,O]=(0,n.useState)(),[R,q]=(0,n.useState)(),[L,B,z]=(0,r.Y)("/components",!0);(0,n.useEffect)(()=>{console.log("Selected row:",R)},[R]);let[H,J]=(0,n.useState)(!1);(0,n.useEffect)(()=>{void 0===N||void 0===S||void 0===F?(J(!0),s(!a)):J(!1)},[N,S,F]);let[U,Q]=(0,n.useState)(!1),[G,W]=(0,n.useState)(!1),[X,$]=(0,n.useState)(!1),ee=e=>{Q(!0),q(e)},et=e=>{W(!0),q(e)},ea=e=>{$(!0),q(e)},[el,en,es]=(0,r.Y)("/predikat",!1),[ei,er]=(0,n.useState)(""),[eo,ec,ed,eu]=(0,h.Y)("/penilaian","post"),ex=(e,t)=>{let l={Jawaban:e.target.value,Fk_Inspeksi:V,Fk_SubComponent:t+1};console.log("Update Data",l),eu(l),s(!a)},ef={headCells:{style:{backgroundColor:"#408EFD",color:"white","&:first-child":{borderTopLeftRadius:"1rem"},"&:last-child":{borderTopRightRadius:"1rem"}}}};(0,n.useEffect)(()=>{if(E){let e=E.SubKomponen.every(e=>e.Keriteria.every(e=>e.Catatan&&e.Catatan.catatan&&e.Catatan.verifikasi));m(e),y(e)}},[E]);let em=[{name:"No",selector:e=>e.Id,sortable:!0,width:"7%"},{name:"Kriteria",selector:e=>e.keriteria,sortable:!0,wrap:!0},{name:"Sesuai/Tidak",cell:t=>(0,l.jsx)("div",{className:"flex gap-2",children:t.Catatan&&"Ditolak"===t.Catatan.verifikasi?(0,l.jsx)("div",{className:"text-sm bg-red-500 rounded-lg px-2 py-1 text-white",children:(0,l.jsx)("span",{children:"Rejected"})}):t.Catatan&&"Verified"===t.Catatan.verifikasi?(0,l.jsx)("div",{className:"text-sm bg-green-500 rounded-lg px-2 py-1 text-white",children:(0,l.jsx)("span",{children:"Verified"})}):(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(d,{onClick:()=>ee(t),disabled:"1"===e}),(0,l.jsx)(u,{onClick:()=>et(t),disabled:"1"===e})]})}),ignoreRowClick:!0},{name:"Catatan",selector:e=>e.Catatan&&e.Catatan.catatan,sortable:!0},{name:"No.Kke",cell:t=>(0,l.jsx)("div",{className:"icon p-5",children:(0,l.jsx)("button",{onClick:()=>t.KkeKeriteria&&window.open("".concat("https://inspektorat-dev.agriciatech.com","/").concat(t.KkeKeriteria.Kke.file),"_blank"),disabled:"1"===e,children:(0,l.jsx)(x.QNI,{className:"text-lg"})})}),sortable:!0}];"1"===e&&em.push({name:"Actions",cell:e=>(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)("button",{className:"bg-blue-700 rounded-xl p-3 py-2 text-white flex gap-2 text-center justify-center items-center",onClick:()=>ea(e),children:[(0,l.jsx)(x.Aac,{}),"Edit"]})}),ignoreRowClick:!0});let ep=()=>{W(!1),$(!1),Q(!1),s(!a)};return(0,l.jsx)("main",{className:"flex bg-[#FAFAFA] w-full flex-col items-start justify-start m-0 p-3 ",children:(0,l.jsxs)("div",{className:"mt-[10vh] overflow-y-auto w-full items-start flex flex-col justify-center h-full",children:[(0,l.jsx)(g.Z,{isVisibleSmall:U,setIsVisibleSmall:Q,onCloseSmall:()=>Q(!1),title:"Konfirmasi Approve",children:(0,l.jsx)(b,{data:R,onCloseModal:ep,Fk_Inspeksi:V})}),(0,l.jsx)(f.Z,{isVisibleConfirm:X,setIsVisibleConfirm:$,onCloseConfirm:()=>$(!1),title:"Konfirmasi Edit",children:(0,l.jsx)(w,{data:R,onCloseModal:ep,Fk_Inspeksi:V})}),(0,l.jsx)(g.Z,{isVisibleSmall:G,setIsVisibleSmall:W,onCloseSmall:()=>W(!1),title:"Konfirmasi Reject Kriteria",children:(0,l.jsx)(j,{data:R,onCloseModal:ep,Fk_Inspeksi:V})}),(0,l.jsxs)("div",{className:"flex flex-col select-area bg-success w-full lg:w-[60%] mb-5",children:[(0,l.jsx)(o,{onChange:(e,t)=>{"komponen"===t?(console.log(e),_(e)):"opd"===t?(console.log(e),C(e)):"tahun"===t&&(console.log(e),I(e))}})," "]}),H?(0,l.jsx)("div",{className:"info mt-5 p-3 bg-green-400 w-full text-white font-bold rounded-lg",children:(0,l.jsx)("p",{children:"Silakan pilih OPD, Tahun dan Komponen Penilian"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"komponen-penilaian items-center flex px-3 justify-between rounded-md bg-white w-full mt-3",children:[(0,l.jsx)("div",{className:"title flex justify-start items-start",children:(0,l.jsx)("p",{className:"text-left font-bold",children:null==E?void 0:E.component})}),(0,l.jsxs)("div",{className:"bobot-nilai flex gap-6",children:[(0,l.jsxs)("div",{className:"bobot flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Bobot"}),(0,l.jsx)("span",{className:"font-bold text-center",children:p?null==E?void 0:E.bobot:0})]}),(0,l.jsxs)("div",{className:"nilai flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Nilai"}),(0,l.jsx)("span",{className:"font-bold text-center",children:p?null==E?void 0:E.nilai.toFixed(2):0})]})]})]}),(0,l.jsx)("div",{className:"w-full",children:E&&E.SubKomponen&&E.SubKomponen.map((t,a)=>(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"rincian-komponen-penilaian items-center flex px-3 flex-col justify-between rounded-md bg-white w-full mt-3",children:[(0,l.jsxs)("div",{className:"info-and-jawaban-section flex justify-between w-full gap-2 item-start py-2",children:[(0,l.jsxs)("div",{className:"title flex items-start gap-2 flex-col justify-between",children:[(0,l.jsx)("p",{className:"text-center font-bold",children:t.nama}),(0,l.jsxs)("div",{className:"select-jawaban flex gap-3 items-center ",children:[(0,l.jsx)("p",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white w-100 text-center text-nowrap",children:"Jawaban :"}),(0,l.jsx)(k.Z,{disabled:"1"===e,options:el,optionLabel:e=>e.predikat,optionValue:e=>e.predikat,defaultValue:t.Penilaian.jawaban,onChange:e=>ex(e,a),defaultText:"Pilih Predikat..."},t.Id)]})]}),(0,l.jsxs)("div",{className:"bobot-nilai flex gap-6 text-center",children:[(0,l.jsxs)("div",{className:"bobot flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Bobot"}),(0,l.jsx)("span",{className:"font-bold",children:i?t.bobot:0})]}),(0,l.jsxs)("div",{className:"nilai flex flex-col bg-slate-300 p-4 rounded-md",children:[(0,l.jsx)("span",{children:"Nilai"}),(0,l.jsx)("span",{className:"font-bold",children:i?t.Penilaian.nilai.toFixed(2):"0"})]})]})]}),(0,l.jsx)("div",{className:"table-container w-full flex",children:(0,l.jsx)("div",{className:"table w-full",children:(0,l.jsx)(c.ZP,{columns:em,data:t.Keriteria,pagination:!0,striped:!0,highlightOnHover:!0,customStyles:ef},t.Id)})})]})},a))})]})]})})}},6215:function(e,t,a){"use strict";var l=a(7437);a(2265),t.Z=e=>{let{loading:t,error:a,dataComponent:n,text:s}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:"bg-slate-500 h-full min-h-[300px] text-white animate-pulse w-full text-sm p-2 rounded-lg flex justify-center items-center text-center mb-5",children:s||"Loading Data..."}):a?(0,l.jsxs)("div",{className:"text-red-700 font-bold text-lg",children:["Error: ",a.message]}):(0,l.jsx)(l.Fragment,{children:n})})}},2546:function(e,t,a){"use strict";var l=a(7437);a(2265),t.Z=e=>{let{options:t,optionLabel:a,optionValue:n,onChange:s,defaultValue:i="",defaultText:r="Pilih ...",disabled:o,className:c}=e;return(0,l.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ".concat(c),onChange:s,defaultValue:i,disabled:o,children:[(0,l.jsx)("option",{value:"",disabled:!0,children:r}),null==t?void 0:t.map(e=>(0,l.jsx)("option",{value:n(e),children:a(e)},n(e)))]})}},288:function(e,t,a){"use strict";var l=a(7437),n=a(2265);t.Z=e=>{let{options:t,optionLabel:a,optionValue:s,onChange:i,defaultValue:r,defaultText:o="Pilih ...",disabled:c}=e,[d,u]=(0,n.useState)(r||"");return(0,n.useEffect)(()=>{u(r||"")},[r]),(0,l.jsxs)("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-sm focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{u(e.target.value),i(e)},value:d,disabled:c,children:[""===r&&(0,l.jsx)("option",{value:"",children:o}),t.map(e=>(0,l.jsx)("option",{value:s(e),children:a(e)},s(e)))]})}},9938:function(e,t,a){"use strict";a.d(t,{Y:function(){return i}});var l=a(2265),n=a(361),s=a(3580);function i(e,t,a){let[i,r]=(0,l.useState)(a||null),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null);return[i,o,d,async a=>{try{let l;c(!0);let i=localStorage.getItem("token"),o={Authorization:"Bearer ".concat(i)};switch(t){case"post":l=await n.Z.post(e,a,{headers:o});break;case"put":l=await n.Z.put(e,a,{headers:o});break;case"delete":l=await n.Z.delete(e,{headers:o});break;default:throw Error("Unsupported HTTP method")}s.Am.success(l.data.message,{position:"top-right"}),r(l.data)}catch(e){u(e)}finally{c(!1)}}]}},5922:function(e,t,a){"use strict";a.d(t,{Y:function(){return s}});var l=a(2265),n=a(361);function s(e,t){let[a,s]=(0,l.useState)([]),[i,r]=(0,l.useState)(!0),[o,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let a=async()=>{try{let t=localStorage.getItem("token"),a=await n.Z.get(e,{headers:{Authorization:"Bearer ".concat(t)}});s(a.data.data)}catch(e){c(e)}finally{r(!1)}};if(t){let e=setInterval(a,5e3);return()=>{clearInterval(e)}}a()},[e,t]),[a,i,o]}},5039:function(e,t,a){"use strict";a.d(t,{c:function(){return s}});var l=a(2265),n=a(361);function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[s,i]=(0,l.useState)(),[r,o]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[u,x]=(0,l.useState)();(0,l.useEffect)(()=>{null!=a&&x(a)},[a]);let f=async()=>{try{let t=localStorage.getItem("token"),a=await n.Z.get(e,{headers:{Authorization:"Bearer ".concat(t)}}),l=a.data.data?a.data.data:a.data;i(l)}catch(e){d(e)}finally{o(!1)}};return(0,l.useEffect)(()=>{f()},[u,e]),(0,l.useEffect)(()=>{if(t){let e=setInterval(f,5e3);return()=>clearInterval(e)}},[f,t]),[s,r,c]}}},function(e){e.O(0,[706,779,126,713,343,580,331,971,23,744],function(){return e(e.s=2472)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{2176:function(e,a,t){Promise.resolve().then(t.bind(t,2860))},2860:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var r=t(7437),s=t(361),n=t(2265);let l=()=>{let[e,a]=(0,n.useState)(22),[t,r]=(0,n.useState)(""),[l,o]=(0,n.useState)([]),[i,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(0),[h,f]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),[b,g]=(0,n.useState)(""),[x,w]=(0,n.useState)([]),[S,v]=(0,n.useState)([]),[j,y]=(0,n.useState)(null),[k,N]=(0,n.useState)([]),P=async()=>{try{let e=await s.Z.get("/formulir2/formulir-tujuan-indikator",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(200===e.status){let a=e.data.data,t=["No","Indikator Sasaran","Aksi","Satuan",...["KA1","KA2","T1","T2","T3","T4","T5"].map(e=>"Tahun ".concat(a[e]))];console.log("Updated Header Data:",t),N(t)}}catch(e){console.log("Error fetching users:",e)}};return(0,n.useEffect)(()=>{P()},[]),console.log("sasaranId",t),{selectedSasaranId:t,recordSasaran:l,setIdIndikator:u,headerDataSasaranPD:["No","Sasaran Perangkat Daerah"],idIndikator:d,headerDataIndikatorSasaran:k,setHeaderDataIndikatorSasaran:N,handleAddSasaranPD:e=>{f(!0),u(e)},recordIndikatorSasaran:i,setRecordIndikatorSasaran:c,isVisibleAddSasaranPDModal:h,setIsVisibleAddSasaranPDModal:f,setRecordSasaran:o,sasaran:m,setSasaran:p,setSelectedSasaranId:r,selectedSasaran:j,setSelectedSasaran:y,detailSasaran:S,setDetailSasaran:v,idUser:e,headerDataSasaran:["No","Sasaran"],setIdUser:a,detailUser:b,setDetailUser:g,detailTahun:x,setDetailTahun:w}};var o=t(681),i=t(710),c=t(5447),d=t(9343),u=t(3580);t(4193),t(9071);let h=e=>{let{register:a,handleSubmit:t,formState:{errors:l},reset:o}=(0,d.cI)(),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{i.current&&i.current.focus()},[]);let[h,f]=(0,n.useState)(""),m=async a=>{let{Fk_IndikatorSasaran:t,sasaran_pd:r}=a,n=e.id_sasaran;try{let a=await s.Z.post("/SasaranPD",{sasaran_pd:r,Fk_IndikatorSasaran:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("response",a.status),200===a.status&&(f(""),e.data(),u.Am.success("Sasaran PD Berhasil Dibuat!",{position:"top-right"}),e.setVisible(!1),o())}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";f(e),u.Am.error(e,{position:"top-right"}),o()}else if(e.response&&403===e.response.status){let e="Gagal menambahkan Sasaran PD!";f(e),u.Am.error(e,{position:"top-right"}),o()}else{console.log("Status respons lainnya:",e.message);let a="Gagal membuat Sasaran PD!,  ".concat(e.message);f(a),u.Am.error(a,{position:"top-right"}),o()}}};return(0,n.useEffect)(()=>{e.isVisible||o()},[e.isVisible,o]),(0,r.jsx)("div",{className:"w-full h-full  px-4",children:(0,r.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:t(m),children:[(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"Sasaran_pd",className:"block mb-1 required",children:"Sasaran PD"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(l.sasaran_pd?"border-red-500":"border-gray-300"),type:"text",id:"sasaran_pd",...a("sasaran_pd",{required:"Sasaran PD is required."}),placeholder:"Enter your Sasaran PD"}),l.sasaran_pd&&(0,r.jsx)("p",{className:"text-red-500",children:l.sasaran_pd.message}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(l.Fk_IndikatorSasaran?"border-red-500":"border-gray-300"),type:"hidden",value:e.id_sasaran,id:"Fk_IndikatorSasaran",...a("Fk_IndikatorSasaran",{required:"Fk_IndikatorSasaran is required."}),placeholder:"Enter your Fk_IndikatorSasaran"})]}),(0,r.jsx)("div",{className:"py-5 flex flex-col",children:(0,r.jsx)(c.Z,{text:"Tambah Sasaran PD",className:"h-10"})})]})})};function f(){var e;let a=l(),t=async()=>{if(a.selectedSasaranId)try{let e=await s.Z.get("/formulir5/iiew/".concat(a.selectedSasaranId),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});a.setSasaran(e.data.sasaran),a.setRecordIndikatorSasaran(e.data.data),a.setRecordSasaran([e.data.sasaran]),console.log("Fetched data sasaran",e.data.sasaran),console.log("Fetched data data",e.data.data)}catch(e){console.log("Error fetching sasaran:",e)}},c=async()=>{try{let e=await s.Z.get("/user",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});a.setDetailUser(e.data.name)}catch(e){console.log("Error fetching users:",e)}},d=async()=>{try{let e=await s.Z.get("/tahun",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});a.setDetailTahun(e.data.data)}catch(e){console.log("Error fetching users:",e)}},u=async()=>{try{let e=await s.Z.get("/formulir2/search?misi=&tujuan=",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});a.setDetailSasaran(e.data.data)}catch(e){console.log("Error fetching users:",e)}},f=a.detailSasaran.filter(e=>null!==e.data_sasaran).flatMap(e=>e.data_sasaran),m=a.headerDataSasaran.map(e=>{switch(e.toLowerCase()){case"no":return{name:e,wrap:!0,selector:(e,a)=>a+1};case"sasaran":return{name:e,wrap:!0,selector:e=>e.Sasaran}}}),p=e=>{let{data:a}=e,t=a.ListSasaranPD||[];return(0,r.jsx)("div",{style:{paddingLeft:"20px"},children:(0,r.jsx)(o.ZP,{columns:[{name:"No",selector:(e,a)=>a+1,wrap:!0},{name:"Sasaran Perangkat Daerah",selector:e=>e.Sasaran_pd,wrap:!0}],data:t,pagination:!0,responsive:!0})})};return(0,n.useEffect)(()=>{c(),d(),u()},[]),(0,n.useEffect)(()=>{console.log("Selected Sasaran ID in useEffect:",a.selectedSasaranId),t()},[a.selectedSasaranId]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{isVisibleSmall:a.isVisibleAddSasaranPDModal,setIsVisibleSmall:a.setIsVisibleAddSasaranPDModal,onCloseSmall:()=>a.setIsVisibleAddSasaranPDModal(!1),children:(0,r.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,r.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Tambah Visi"}),(0,r.jsx)("div",{className:"w-full h-full ",children:(0,r.jsx)(h,{data:t,id_sasaran:a.idIndikator,setVisible:a.setIsVisibleAddSasaranPDModal,isVisible:a.isVisibleAddSasaranPDModal})})]})}),(0,r.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,r.jsxs)("div",{className:"mt-[10vh] overflow-y-auto w-full items-center justify-start h-full pt-5 px-2 flex flex-col",children:[(0,r.jsx)("div",{className:"information flex flex-col w-full bg-blue-600 p-3 rounded-xl text-white font-bold",children:(0,r.jsx)("div",{className:"flex w-full justify-start",children:(0,r.jsx)("table",{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Periode"}),(0,r.jsx)("td",{className:"px-2",children:":"}),a.detailTahun.length>0&&(0,r.jsxs)(r.Fragment,{children:[a.detailTahun[0].tahun," ","s/d"," ",a.detailTahun[a.detailTahun.length-1].tahun]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Perangkat Daerah"}),(0,r.jsx)("td",{className:"px-2",children:":"}),(0,r.jsx)("td",{children:a.detailUser})]})]})})})}),(0,r.jsx)("div",{className:"mt-5 w-full py-2 ",children:(0,r.jsxs)("select",{id:"sasaranSelect",value:null!==(e=a.selectedSasaranId)&&void 0!==e?e:"",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-1/2 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{a.setSelectedSasaranId(e.target.value)},children:[(0,r.jsx)("option",{value:"",children:"Select a Sasaran"}),f.map(e=>(0,r.jsx)("option",{value:e.id_sasaran,children:e.sasaran},e.id_sasaran))]})}),""===a.selectedSasaranId?(0,r.jsx)("div",{className:"mt-4 flex justify-start text-white font-medium text-lg items-center w-full bg-yellow-400 h-16 rounded-lg",children:(0,r.jsx)("h1",{className:"pl-5",children:"Silahkan pilih sasaran terlebih dahulu"})}):(0,r.jsx)("div",{className:"mt-5 w-full py-2",style:{maxHeight:"800px",overflowY:"scroll"},children:(0,r.jsx)(o.ZP,{columns:m,data:a.recordSasaran,responsive:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:()=>{let e=a.headerDataIndikatorSasaran.map(e=>{if("no"===e.toLocaleLowerCase())return{name:e,wrap:!0,selector:(e,a)=>a+1};if("indikator sasaran"===e.toLocaleLowerCase())return{name:e,wrap:!0,selector:e=>e.Indikator_sasaran,width:"15%"};if("aksi"===e.toLowerCase())return{name:e,wrap:!0,width:"15%",cell:e=>(0,r.jsx)("button",{onClick:()=>a.handleAddSasaranPD(e.Pk_indikator_sasaran_id),className:"bg-blue-500 text-white p-2 rounded-sm",children:"Tambah Indikator Sasaran PD"})};{if("satuan"===e.toLocaleLowerCase())return{name:e,wrap:!0,selector:e=>{var a;return(null===(a=e.KondisiIndikator)||void 0===a?void 0:a.Satuan)?e.KondisiIndikator.Satuan:null}};let a=e.replace("Tahun ","");return{name:e,wrap:!0,selector:e=>{var t;let r=null===(t=e.KondisiIndikator)||void 0===t?void 0:t.Kondisi.find(e=>e.Tahun===a);return r?r.Target:"-"}}}});return(0,r.jsx)("div",{style:{paddingLeft:"20px"},children:(0,r.jsx)(o.ZP,{columns:e,data:a.recordIndikatorSasaran||[],pagination:!0,responsive:!0,expandableRows:!0,expandableRowsComponent:p})})}})})]})})]})}},5447:function(e,a,t){"use strict";var r=t(7437);t(2265),a.Z=e=>{let{text:a,className:t}=e;return(0,r.jsx)("button",{className:"bg-blue-500 font-button hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-sm transition-colors ".concat(t),type:"submit",children:a})}},6409:function(e,a,t){"use strict";var r=t(2265);a.Z=()=>{let[e,a]=(0,r.useState)(!1);return{modal:{isVisibleSmall:e,setIsVisibleSmall:a,onCloseSmall:()=>a(!1)},visible:e,setVisible:a}}},710:function(e,a,t){"use strict";var r=t(7437),s=t(6409),n=t(5097);a.Z=e=>{let{isVisibleSmall:a,setIsVisibleSmall:t,onCloseSmall:l,children:o,title:i}=e;return(0,s.Z)(),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"\n          ".concat(a?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50  h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,r.jsx)("div",{onClick:()=>l(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"}),(0,r.jsxs)("div",{className:" h-screen flex lg:w-[40%] w-full flex-col ",children:[(0,r.jsx)("div",{onClick:()=>l(),className:"md:h-[20%] h-[10%]  w-full"}),(0,r.jsxs)("div",{className:"h-full relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,r.jsxs)("div",{onClick:()=>l(),className:"z-10 h-[10%] flex justify-between items-center p-3 cursor-pointer rounded-md bg-blue-500 text-white w-full",children:[(0,r.jsx)("h2",{className:"text-lg font-bold",children:i}),(0,r.jsx)(n.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,r.jsx)("div",{className:"overflow-y-auto",children:o})]}),(0,r.jsx)("div",{onClick:()=>l(),className:"md:h-[20%] h-[10%]  w-full"})]}),(0,r.jsx)("div",{onClick:()=>l(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"})]})})}},361:function(e,a,t){"use strict";t.d(a,{H:function(){return l}});var r=t(2126);let s="",n=r.Z.create({baseURL:"https://inspektorat-dev.agriciatech.com/api/v1"}),l=()=>{let e=localStorage.getItem("token");e&&(s=e,n.defaults.headers.common.Authorization="Bearer ".concat(s))};n.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),a.Z=n},4193:function(){},9071:function(){},1810:function(e,a,t){"use strict";t.d(a,{w_:function(){return d}});var r=t(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=r.createContext&&r.createContext(s),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach(function(a){var r,s;r=a,s=t[a],(r=function(e){var a=function(e,a){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:String(a)}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function d(e){return a=>r.createElement(u,o({attr:c({},e.attr)},a),function e(a){return a&&a.map((a,t)=>r.createElement(a.tag,c({key:t},a.attr),e(a.child)))}(e.child))}function u(e){var a=a=>{var t,{attr:s,size:n,title:i}=e,d=function(e,a){if(null==e)return{};var t,r,s=function(e,a){if(null==e)return{};var t,r,s={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)t=n[r],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}(e,l),u=n||a.size||"1em";return a.className&&(t=a.className),e.className&&(t=(t?t+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,d,{className:t,style:c(c({color:e.color||a.color},a.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==n?r.createElement(n.Consumer,null,e=>a(e)):a(s)}}},function(e){e.O(0,[384,706,126,713,343,580,971,23,744],function(){return e(e.s=2176)}),_N_E=e.O()}]);
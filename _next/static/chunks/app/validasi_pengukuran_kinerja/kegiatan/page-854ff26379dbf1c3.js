(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9586],{5145:function(e,a,t){Promise.resolve().then(t.bind(t,753))},753:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return p}});var l=t(7437),s=t(2265);t(9396);let r=()=>{let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[c,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)(0),[m,x]=(0,s.useState)([]),[p,g]=(0,s.useState)("2020"),[f,w]=(0,s.useState)(1),[b,v]=(0,s.useState)(""),[j,k]=(0,s.useState)(0),[y,N]=(0,s.useState)([]),[S,T]=(0,s.useState)(["No","Program","Aksi","Kegiatan","Indikator","Target","TW1","TW2","TW3","TW4","Total","Validasi","Catatan"]),[V,I]=(0,s.useState)(["Kegiatan","Indikator Kegiatan","Deskripsi","Definisi Operasional","Sumber Data","Periode Pengukuran"]);return{detailTahun:e,headerDataRencanaAksi:S,setHeaderDataRencanaAksi:T,tahunSelected:p,headerDataFormulasi:V,setHeaderDataFormulasi:I,detailAllUser:r,setDetailAllUser:i,listKegiatan:y,userSelected:b,setUserSelected:v,detailData:m,setDetailData:x,idUserSelected:j,setIdUserSelected:k,setListKegiatan:N,isVisibleEditRencanaKerja:n,setIsVisibleEditRencanaKerja:d,setTahunSelected:g,idTahunSelected:f,handlePopUp:e=>{o(!0),h(e)},isVisiblePopUp:c,setIsVisiblePopUp:o,setIdTahunSelected:w,dataId:u,setDataId:h,handleEdit:e=>{d(!0),h(e)},setDetailTahun:a,detailUser:t,setDetailUser:l}};var i=t(361),n=t(681),d=t(5097),c=t(6356),o=t(710),u=t(5447),h=t(9343),m=t(3580);t(4193);let x=e=>{let{register:a,handleSubmit:t,formState:{errors:r},reset:n,setValue:d}=(0,h.cI)({defaultValues:{validasi:"",catatan:""}}),c=async()=>{try{let a=await i.Z.get("/formulir13/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("edit formulasi",a.data.data),d("validasi",a.data.data.validasi),d("catatan",a.data.data.catatan)}catch(e){console.error("Failed to fetch user data:",e)}};(0,s.useEffect)(()=>{c()},[e.id,d]);let o=(0,s.useRef)(null),[x,p]=(0,s.useState)(""),g=async a=>{let{validasi:t,catatan:l}=a;try{let a=await i.Z.put("/formulir13/".concat(e.id),{validasi:t,catatan:l},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("response",a.status),200===a.status&&(p(""),e.data(),m.Am.success("Data Validasi Kegiatan Berhasil Diperbarui!",{position:"top-right"}),e.setVisible(!1))}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";p(e),m.Am.error(e,{position:"top-right"})}else if(e.response&&403===e.response.status){let e="Gagal Memperbarui Validasi Data Kegiatan!";p(e),m.Am.error(e,{position:"top-right"})}else{console.log("Status respons lainnya:",e.message);let a="Gagal Memperbarui Data Validasi Kegiatan!,  ".concat(e.message);p(a),m.Am.error(a,{position:"top-right"})}}};return(0,s.useEffect)(()=>{o.current&&o.current.focus()},[]),(0,s.useEffect)(()=>{e.isVisible},[e.isVisible]),(0,l.jsx)("div",{className:"w-full h-full  px-4",children:(0,l.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:t(g),children:[(0,l.jsxs)("div",{className:"flex flex-col flex-col-row",children:[(0,l.jsx)("label",{htmlFor:"Validasi",className:"block mb-1 required",children:"Validasi"}),(0,l.jsxs)("select",{id:"Validasi",...a("validasi",{required:!0}),className:"py-2 border border-slate-300 rounded-lg",children:[(0,l.jsx)("option",{value:"",children:"Pilih Status"}),(0,l.jsx)("option",{value:"1",children:"Validasi"}),(0,l.jsx)("option",{value:"0",children:"Belum Validasi"})]}),r.validasi&&(0,l.jsx)("span",{className:"text-red-500",children:"Field ini diperlukan"}),(0,l.jsx)("label",{htmlFor:"Validasi",className:"block mb-1 required",children:"Catatan"}),(0,l.jsx)("input",{id:"Catatan",type:"text",placeholder:"Fill your catatan",...a("catatan",{required:!0}),className:"py-2 border border-slate-300 rounded-lg"}),r.catatan&&(0,l.jsx)("span",{className:"text-red-500",children:"Field ini diperlukan"})]}),(0,l.jsx)("div",{className:"py-5 flex flex-col",children:(0,l.jsx)(u.Z,{text:"Tambah Validasi Kegiatan",className:"h-10"})})]})})};var p=()=>{var e,a,t;let u=r(),h=async()=>{try{let e=await i.Z.get("/tahun",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setDetailTahun(e.data.data)}catch(e){console.log("Error fetching users:",e)}},m=async()=>{try{let e=await i.Z.get("/user",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setDetailUser(e.data.name)}catch(e){console.log("Error fetching users:",e)}},p=async()=>{try{let e=await i.Z.get("/users?",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setDetailAllUser(e.data.data)}catch(e){console.log("Error fetching users:",e)}};console.log(u.idUserSelected);let g=async()=>{try{let e=await i.Z.get("/formulir13?tahun=".concat(u.tahunSelected,"&userId=").concat(u.idUserSelected),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setListKegiatan(e.data.data),console.log("rencana kegiatan",e.data.data)}catch(e){console.log("Error fetching users:",e)}},f=null===(e=u.headerDataRencanaAksi)||void 0===e?void 0:e.map((e,a)=>{switch(e.toLowerCase()){case"no":return{name:e,wrap:!0,width:"200px",selector:(e,a)=>a+1};case"program":return{name:e,wrap:!0,width:"200px",selector:e=>e.program};case"aksi":return{name:e,wrap:!0,width:"200px",cell:e=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{onClick:()=>u.handleEdit(null==e?void 0:e.id),children:(0,l.jsx)(c.zmo,{className:"w-5 h-5 text-blue-500"})})})};case"kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>e.kegiatan};case"indikator":return{name:e,wrap:!0,width:"200px",selector:e=>e.indikator};case"target":return{name:e,wrap:!0,width:"200px",selector:e=>e.target};case"tw1":return{name:e,wrap:!0,width:"200px",selector:e=>e.tw1};case"tw2":return{name:e,wrap:!0,width:"200px",selector:e=>e.tw2};case"tw3":return{name:e,wrap:!0,width:"200px",selector:e=>e.tw3};case"tw4":return{name:e,wrap:!0,width:"200px",selector:e=>e.tw4};case"total":return{name:e,wrap:!0,width:"200px",selector:e=>e.Total};case"validasi":return{name:e,wrap:!0,center:!0,width:"150px",cell:e=>(0,l.jsx)("div",{className:"flex flex-row items-center justify-start w-full",children:1==e.validasi?(0,l.jsx)("div",{className:"p-2 my-2 bg-green-500 rounded-lg text-center text-white",children:"Sudah Divalidasi"}):1!=e.validasi&&null!=e.catatan?(0,l.jsx)("div",{className:"p-2 my-2 bg-red-500 rounded-lg  text-center text-white",children:"Data Belum Divalidasi Dengan Catatan"}):(0,l.jsx)("div",{className:"p-2 my-2 bg-red-500 rounded-lg text-center text-white",children:"Data Belum Divalidasi"})})};case"catatan":return{name:e,wrap:!0,center:!0,width:"150px",cell:e=>(0,l.jsx)("div",{className:"flex flex-row items-center justify-start w-full",children:null===e.catatan||""===e.catatan?(0,l.jsx)("div",{className:"p-2 bg-red-500 rounded-lg text-center text-white",children:"Tidak ada data"}):"".concat(e.catatan)})}}}),w={headCells:{style:{backgroundColor:"#408EFD",color:"white","&:first-child":{borderTopLeftRadius:"1rem"},"&:last-child":{borderTopRightRadius:"1rem"}}}};return(0,s.useEffect)(()=>{h(),m(),p()},[]),(0,s.useEffect)(()=>{g()},[u.tahunSelected,u.idUserSelected]),console.log("selected tahun",u.tahunSelected),console.log("selectedIdtHAUN",u.idTahunSelected),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{isVisibleSmall:u.isVisibleEditRencanaKerja,setIsVisibleSmall:u.setIsVisibleEditRencanaKerja,onCloseSmall:()=>u.setIsVisibleEditRencanaKerja(!1),children:(0,l.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,l.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Data Kegiatan"}),(0,l.jsx)(x,{data:g,id:u.dataId,setVisible:u.setIsVisibleEditRencanaKerja,isVisible:u.isVisibleEditRencanaKerja})]})}),(0,l.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,l.jsxs)("div",{className:"mt-[10vh] h-full overflow-y-auto w-full items-center flex justify-start pt-5 px-2 flex-col ",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full bg-blue-600 p-3 rounded-xl text-white font-bold",children:[(0,l.jsxs)("div",{className:"flex w-full justify-start",children:[" ",(0,l.jsx)("table",{className:"table-auto",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Periode"}),(0,l.jsx)("td",{className:"px-1",children:":"}),u.detailTahun.length>0&&(0,l.jsxs)(l.Fragment,{children:[u.detailTahun[0].tahun," ","s/d"," ",u.detailTahun[u.detailTahun.length-1].tahun]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:"Perangkat Daerah"}),(0,l.jsx)("td",{className:"",children:":"}),(0,l.jsx)("td",{children:u.detailUser})]})]})})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{id:"tahunSelected",value:u.tahunSelected,className:"bg-gray-50 border-2 border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{let a=e.target.value,t=u.detailTahun.find(e=>e.tahun===a);t&&(u.setTahunSelected(a),u.setIdTahunSelected(t.Pk_Tahun_Id))},children:[(0,l.jsx)("option",{value:"",children:"Pilih Tahun"}),u.detailTahun.map(e=>(0,l.jsx)("option",{children:e.tahun},e.Pk_Tahun_Id))]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("select",{id:"userSelected",value:u.userSelected,className:"bg-gray-50 border-2 border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{let a=e.target.value,t=u.detailAllUser.find(e=>e.name===a);t&&(u.setUserSelected(a),u.setIdUserSelected(t.Id))},children:[(0,l.jsx)("option",{className:"text-black",value:"",children:"Pilih User"}),null===(a=u.detailAllUser)||void 0===a?void 0:a.map(e=>(0,l.jsx)("option",{className:"text-black",value:e.name,children:e.name},e.Id))]})})]}),(null==u?void 0:null===(t=u.listKegiatan)||void 0===t?void 0:t.length)==0||(null==u?void 0:u.listKegiatan)==null?(0,l.jsx)("div",{className:"bg-yellow-400 text-xl font-medium py-2 mt-2 rounded-lg text-white w-full",children:(0,l.jsx)("div",{className:"pl-2",children:"Tidak Ada Data"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"my-3 w-full flex justify-start items-center px-5 ",children:(0,l.jsx)("div",{className:" rounded-md px-5  shadow-sm border-2",children:(0,l.jsx)(d.EY5,{className:"w-10 h-10 py-1 text-8xl text-green-900"})})}),(0,l.jsx)("div",{className:"w-full flex px-1 my-2 flex-col",children:(0,l.jsx)(n.ZP,{pagination:!0,responsive:!0,columns:f,data:(null==u?void 0:u.listKegiatan)||[],customStyles:w,expandableRowsComponent:e=>{var a;let{data:t}=e;console.log("Data Formulasi:",t.Formulasi);let s=null===(a=u.headerDataFormulasi)||void 0===a?void 0:a.map(e=>{switch(e.toLowerCase()){case"kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.kegiatan)||"Tidak ada data"};case"indikator kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.indikator_kegiatan)||"Tidak ada data"};case"deskripsi":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.deskripsi)||"Tidak ada data"};case"definisi operasional":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.formulasi)||"Tidak ada data"};case"sumber data":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.sumber_data)||"Tidak ada data"};case"periode pengukuran":return{name:e,wrap:!0,width:"200px",selector:e=>(null==e?void 0:e.periode_pengukuran)||"Tidak ada data"};default:return null}});return(0,l.jsx)("div",{style:{paddingTop:"10px",paddingLeft:"20px"},children:(0,l.jsx)(n.ZP,{columns:s,data:(null==t?void 0:t.Formulasi[0])||[],pagination:!0,customStyles:w,responsive:!0})})},expandableRows:!0})})]})]})})]})}},5447:function(e,a,t){"use strict";var l=t(7437);t(2265),a.Z=e=>{let{text:a,className:t}=e;return(0,l.jsx)("button",{className:"bg-blue-500 font-button hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-sm transition-colors ".concat(t),type:"submit",children:a})}},6409:function(e,a,t){"use strict";var l=t(2265);a.Z=()=>{let[e,a]=(0,l.useState)(!1);return{modal:{isVisibleSmall:e,setIsVisibleSmall:a,onCloseSmall:()=>a(!1)},visible:e,setVisible:a}}},710:function(e,a,t){"use strict";var l=t(7437),s=t(6409),r=t(5097);a.Z=e=>{let{isVisibleSmall:a,setIsVisibleSmall:t,onCloseSmall:i,children:n,title:d}=e;return(0,s.Z)(),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"\n          ".concat(a?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50  h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,l.jsx)("div",{onClick:()=>i(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"}),(0,l.jsxs)("div",{className:" h-screen flex lg:w-[40%] w-full flex-col ",children:[(0,l.jsx)("div",{onClick:()=>i(),className:"md:h-[20%] h-[10%]  w-full"}),(0,l.jsxs)("div",{className:"h-full relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,l.jsxs)("div",{onClick:()=>i(),className:"z-10 h-[10%] flex justify-between items-center p-3 cursor-pointer rounded-md bg-blue-500 text-white w-full",children:[(0,l.jsx)("h2",{className:"text-lg font-bold",children:d}),(0,l.jsx)(r.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,l.jsx)("div",{className:"overflow-y-auto",children:n})]}),(0,l.jsx)("div",{onClick:()=>i(),className:"md:h-[20%] h-[10%]  w-full"})]}),(0,l.jsx)("div",{onClick:()=>i(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"})]})})}},361:function(e,a,t){"use strict";t.d(a,{H:function(){return i}});var l=t(2126);let s="",r=l.Z.create({baseURL:"https://inspektorat-be.agriciatech.com/api/v1"}),i=()=>{let e=localStorage.getItem("token");e&&(s=e,r.defaults.headers.common.Authorization="Bearer ".concat(s))};r.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),a.Z=r},4193:function(){},9396:function(){}},function(e){e.O(0,[8882,7679,5706,6051,2126,6713,9343,9500,2971,7023,1744],function(){return e(e.s=5145)}),_N_E=e.O()}]);
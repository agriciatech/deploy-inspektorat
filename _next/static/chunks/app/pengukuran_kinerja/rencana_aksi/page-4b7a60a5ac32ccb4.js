(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5503],{4989:function(e,t,a){Promise.resolve().then(a.bind(a,6925))},6925:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),l=a(2265);a(4557);let s=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(""),[s,n]=(0,l.useState)(!1),[i,d]=(0,l.useState)(0),[c,o]=(0,l.useState)(0),[u,h]=(0,l.useState)("2020"),[m,x]=(0,l.useState)(1),[g,f]=(0,l.useState)([]),[p,b]=(0,l.useState)(["No","Program","Aksi","Kegiatan","Indikator Kegiatan","Target Kegiatan","Uraian","Target","Satuan","Penanggung Jawab","Total TR","Validasi","Catatan"]);return{detailTahun:e,headerDataRencanaAksi:p,setHeaderDataRencanaAksi:b,tahunSelected:u,listRencanaAksi:g,isVisibleEditRencanaKerja:s,setIsVisibleEditRencanaKerja:n,setListRencanaAksi:f,setTahunSelected:h,idTahunSelected:m,setIdTahunSelected:x,dataId:i,setDataId:d,handleEdit:e=>{n(!0),d(e)},setDetailTahun:t,idUser:c,setIdUser:o,detailUser:a,setDetailUser:r}};var n=a(361),i=a(681),d=a(5097),c=a(6356),o=a(710),u=a(5447),h=a(9343),m=a(3580);a(4193);let x=e=>{let{register:t,handleSubmit:a,formState:{errors:s},reset:i,setValue:d}=(0,h.cI)({defaultValues:{rtr1:"",rtr2:"",rtr3:"",rtr4:""}}),c=async()=>{try{let t=await n.Z.get("/formulir11/".concat(e.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("edit formulasi",t.data.data),d("rtr1",t.data.data.rtr1),d("rtr2",t.data.data.rtr2),d("rtr3",t.data.data.rtr3),d("rtr4",t.data.data.rtr4)}catch(e){console.error("Failed to fetch user data:",e)}};(0,l.useEffect)(()=>{c()},[e.id,d]);let o=(0,l.useRef)(null),[x,g]=(0,l.useState)(""),f=async t=>{let{rtr1:a,rtr2:r,rtr3:l,rtr4:s}=t,i=parseFloat(a.toString()),d=parseFloat(r.toString()),c=parseFloat(l.toString()),o=parseFloat(s.toString());try{let t=await n.Z.put("/formulir11/".concat(e.id),{rtr1:i,rtr2:d,rtr3:c,rtr4:o},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});console.log("response",t.status),200===t.status&&(g(""),e.data(),m.Am.success("Data Rencana Aksi Berhasil Diperbarui!",{position:"top-right"}),e.setVisible(!1))}catch(e){if(e.response&&401===e.response.status){let e="Unauthorized";g(e),m.Am.error(e,{position:"top-right"})}else if(e.response&&403===e.response.status){let e="Gagal Memperbarui Data Rencana Aksi!";g(e),m.Am.error(e,{position:"top-right"})}else{console.log("Status respons lainnya:",e.message);let t="Gagal Memperbarui Data Rencana Aksi!,  ".concat(e.message);g(t),m.Am.error(t,{position:"top-right"})}}};return(0,l.useEffect)(()=>{o.current&&o.current.focus()},[]),(0,l.useEffect)(()=>{e.isVisible},[e.isVisible]),(0,r.jsx)("div",{className:"w-full h-full  px-4",children:(0,r.jsxs)("form",{className:"flex h-full pt-4 w-full justify-evenly flex-col",onSubmit:a(f),children:[(0,r.jsxs)("div",{className:"flex flex-col  flex-col-row",children:[(0,r.jsx)("label",{htmlFor:"rtr1",className:"block mb-1 required",children:"rtr1"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.rtr1?"border-red-500":"border-gray-300"),type:"text",id:"rtr1",...t("rtr1",{required:"rtr1 is required.",validate:e=>/^\d+(\.\d{0,2})?$/.test(e)||"Invalid number format"}),onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1").replace(/^(\d*\.\d{0,2}).*$/,"$1");e.target.value=t,d("rtr1",e.target.value)},placeholder:"Enter your rtr1"}),s.rtr1&&(0,r.jsx)("p",{className:"text-red-500",children:s.rtr1.message}),(0,r.jsx)("label",{htmlFor:"rtr2",className:"block mb-1 required",children:"rtr2"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.rtr2?"border-red-500":"border-gray-300"),type:"text",id:"rtr2",...t("rtr2",{required:"rtr2 is required.",validate:e=>/^\d+(\.\d{0,2})?$/.test(e)||"Invalid number format"}),onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1").replace(/^(\d*\.\d{0,2}).*$/,"$1");e.target.value=t,d("rtr2",e.target.value)},placeholder:"Enter your rtr2"}),s.rtr2&&(0,r.jsx)("p",{className:"text-red-500",children:s.rtr2.message}),(0,r.jsx)("label",{htmlFor:"rtr3",className:"block mb-1 required",children:"rtr3"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.rtr3?"border-red-500":"border-gray-300"),type:"text",id:"rtr3",...t("rtr3",{required:"rtr3 is required.",validate:e=>/^\d+(\.\d{0,2})?$/.test(e)||"Invalid number format"}),onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1").replace(/^(\d*\.\d{0,2}).*$/,"$1");e.target.value=t,d("rtr3",e.target.value)},placeholder:"Enter your rtr3"}),s.rtr3&&(0,r.jsx)("p",{className:"text-red-500",children:s.rtr3.message}),(0,r.jsx)("label",{htmlFor:"rtr4",className:"block mb-1 required",children:"rtr4"}),(0,r.jsx)("input",{className:"border rounded-md w-full px-3 py-2 focus:outline-none focus:border-blue-500 ".concat(s.rtr4?"border-red-500":"border-gray-300"),type:"number",id:"rtr4",...t("rtr4",{required:"rtr4 is required.",validate:e=>/^\d+(\.\d{0,2})?$/.test(e)||"Invalid number format"}),onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1").replace(/^(\d*\.\d{0,2}).*$/,"$1");e.target.value=t,d("rtr4",e.target.value)},placeholder:"Enter your rtr4"}),s.rtr4&&(0,r.jsx)("p",{className:"text-red-500",children:s.rtr4.message})]}),(0,r.jsx)("div",{className:"py-5 flex flex-col",children:(0,r.jsx)(u.Z,{text:"Edit Data Rencana Aksi",className:"h-10"})})]})})};var g=()=>{var e,t,a;let u=s(),h=async()=>{try{let e=await n.Z.get("/tahun",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setDetailTahun(e.data.data)}catch(e){console.log("Error fetching users:",e)}},m=async()=>{try{let e=await n.Z.get("/user",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setDetailUser(e.data.name),u.setIdUser(e.data.Id)}catch(e){console.log("Error fetching users:",e)}},g=async()=>{try{let e=await n.Z.get("/formulir11?tahun=".concat(u.tahunSelected,"&userId=").concat(u.idUser),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});u.setListRencanaAksi(e.data.data),console.log("rencana aksi",e.data.data)}catch(e){console.log("Error fetching users:",e)}},f=null===(e=u.headerDataRencanaAksi)||void 0===e?void 0:e.map((e,t)=>{switch(e.toLowerCase()){case"no":return{name:e,wrap:!0,width:"200px",selector:(e,t)=>t+1};case"program":return{name:e,wrap:!0,width:"200px",selector:e=>e.program};case"aksi":return{name:e,wrap:!0,width:"200px",cell:e=>(0,r.jsx)("div",{onClick:()=>u.handleEdit(e.id),children:(0,r.jsx)(c.zmo,{className:"w-5 h-5 text-blue-500"})})};case"kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>e.kegiatan};case"indikator kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>e.indikator_kegiatan};case"target kegiatan":return{name:e,wrap:!0,width:"200px",selector:e=>e.target_kegiatan};case"uraian":return{name:e,wrap:!0,width:"200px",selector:e=>e.uraian};case"target":return{name:e,wrap:!0,width:"200px",selector:e=>e.target};case"satuan":return{name:e,wrap:!0,width:"200px",selector:e=>e.satuan};case"penanggung jawab":return{name:e,wrap:!0,width:"200px",selector:e=>e.penanggung_jawab};case"total tr":return{name:e,wrap:!0,width:"200px",selector:e=>e.TotalTR};case"validasi":return{name:e,wrap:!0,center:!0,width:"150px",cell:e=>(0,r.jsx)("div",{className:"flex flex-row items-center justify-start w-full",children:1==e.validasi?(0,r.jsx)("div",{className:"p-2 my-2 bg-green-500 rounded-lg text-center text-white",children:"Sudah Divalidasi"}):1!=e.validasi&&null!=e.catatan?(0,r.jsx)("div",{className:"p-2 my-2 bg-red-500 rounded-lg  text-center text-white",children:"Data Belum Divalidasi Dengan Catatan"}):(0,r.jsx)("div",{className:"p-2 my-2 bg-red-500 rounded-lg text-center text-white",children:"Data Belum Divalidasi"})})};case"catatan":return{name:e,wrap:!0,center:!0,width:"150px",cell:e=>(0,r.jsx)("div",{className:"flex flex-row items-center justify-start w-full",children:null===e.catatan||""===e.catatan?(0,r.jsx)("div",{className:"p-2 bg-red-500 rounded-lg text-center text-white",children:"Tidak ada data"}):"".concat(e.catatan)})}}});return console.log("id user",u.idUser),(0,l.useEffect)(()=>{h(),m()},[]),(0,l.useEffect)(()=>{g()},[u.tahunSelected]),console.log("selected tahun",u.tahunSelected),console.log("selectedIdtHAUN",u.idTahunSelected),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{isVisibleSmall:u.isVisibleEditRencanaKerja,setIsVisibleSmall:u.setIsVisibleEditRencanaKerja,onCloseSmall:()=>u.setIsVisibleEditRencanaKerja(!1),children:(0,r.jsxs)("div",{className:"flex relative justify-start pt-3 h-full  items-start flex-col",children:[(0,r.jsx)("div",{className:"w-full absolute items-start flex  justify-center",children:"Edit Data Rencana Aksi"}),(0,r.jsx)(x,{data:g,id:u.dataId,setVisible:u.setIsVisibleEditRencanaKerja,isVisible:u.isVisibleEditRencanaKerja})]})}),(0,r.jsx)("main",{className:"flex min-h-screen bg-[#FAFAFA] w-full flex-col items-center justify-center m-0",children:(0,r.jsxs)("div",{className:"mt-[10vh] h-full overflow-y-auto w-full items-center flex justify-start pt-5 px-2 flex-col ",children:[(0,r.jsxs)("div",{className:"flex flex-col w-full bg-blue-600 p-3 rounded-xl text-white font-bold",children:[(0,r.jsxs)("div",{className:"flex w-full justify-start",children:[" ",(0,r.jsx)("table",{className:"table-auto",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Periode"}),(0,r.jsx)("td",{className:"px-1",children:":"}),u.detailTahun.length>0&&(0,r.jsxs)(r.Fragment,{children:[u.detailTahun[0].tahun," ","s/d"," ",u.detailTahun[u.detailTahun.length-1].tahun]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Perangkat Daerah"}),(0,r.jsx)("td",{className:"",children:":"}),(0,r.jsx)("td",{children:u.detailUser})]})]})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{id:"tahunSelected",value:u.tahunSelected,className:"bg-gray-50 border-2 border-gray-400 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:e=>{let t=e.target.value,a=u.detailTahun.find(e=>e.tahun===t);a&&(u.setTahunSelected(t),u.setIdTahunSelected(a.Pk_Tahun_Id))},children:[(0,r.jsx)("option",{value:"",children:"Pilih Tahun"}),null===(t=u.detailTahun)||void 0===t?void 0:t.map(e=>(0,r.jsx)("option",{children:e.tahun},e.Pk_Tahun_Id))]})})]}),(null==u?void 0:null===(a=u.listRencanaAksi)||void 0===a?void 0:a.length)==0||(null==u?void 0:u.listRencanaAksi)==null?(0,r.jsx)("div",{className:"bg-yellow-400 text-xl font-medium py-2 mt-2 rounded-lg text-white w-full",children:(0,r.jsx)("div",{className:"pl-2",children:"Tidak Ada Data"})}):(0,r.jsxs)("div",{className:"w-full my-3",children:[(0,r.jsx)("div",{className:"my-3 w-full flex justify-start items-center px-5 ",children:(0,r.jsx)("div",{className:" rounded-md px-5  shadow-sm border-2",children:(0,r.jsx)(d.EY5,{className:"w-10 h-10 py-1 text-8xl text-green-900"})})}),(0,r.jsx)("div",{className:"w-full flex px-1 my-2 flex-col",children:(0,r.jsx)(i.ZP,{pagination:!0,responsive:!0,columns:f,data:(null==u?void 0:u.listRencanaAksi)||[],customStyles:{headCells:{style:{backgroundColor:"#408EFD",color:"white","&:first-child":{borderTopLeftRadius:"1rem"},"&:last-child":{borderTopRightRadius:"1rem"}}}}})})]})]})})]})}},5447:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{text:t,className:a}=e;return(0,r.jsx)("button",{className:"bg-blue-500 font-button hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-sm transition-colors ".concat(a),type:"submit",children:t})}},6409:function(e,t,a){"use strict";var r=a(2265);t.Z=()=>{let[e,t]=(0,r.useState)(!1);return{modal:{isVisibleSmall:e,setIsVisibleSmall:t,onCloseSmall:()=>t(!1)},visible:e,setVisible:t}}},710:function(e,t,a){"use strict";var r=a(7437),l=a(6409),s=a(5097);t.Z=e=>{let{isVisibleSmall:t,setIsVisibleSmall:a,onCloseSmall:n,children:i,title:d}=e;return(0,l.Z)(),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"\n          ".concat(t?"z-20 top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50 flex w-screen h-screen overlow-hidden   backdrop-blur-sm":"z-20 w-[0px] top-0 right-0 bottom-0 left-0 fixed bg-black bg-opacity-50  h-screen overlow-hidden   backdrop-blur-sm hidden","\n          "),children:[(0,r.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"}),(0,r.jsxs)("div",{className:" h-screen flex lg:w-[40%] w-full flex-col ",children:[(0,r.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"}),(0,r.jsxs)("div",{className:"h-full relative rounded-md bg-white w-full flex flex-col shadow-2xl shadow-black",children:[(0,r.jsxs)("div",{onClick:()=>n(),className:"z-10 h-[10%] flex justify-between items-center p-3 cursor-pointer rounded-md bg-blue-500 text-white w-full",children:[(0,r.jsx)("h2",{className:"text-lg font-bold",children:d}),(0,r.jsx)(s.bjh,{className:"h-7 w-7 bg-red-700 text-white p-1 rounded-full hover:shadow-lg hover:-rotate-12",title:"Tutup Modal"})]}),(0,r.jsx)("div",{className:"overflow-y-auto",children:i})]}),(0,r.jsx)("div",{onClick:()=>n(),className:"md:h-[20%] h-[10%]  w-full"})]}),(0,r.jsx)("div",{onClick:()=>n(),className:" h-screen flex lg:w-[30%] w-[5%]  md:w-[20%]"})]})})}},361:function(e,t,a){"use strict";a.d(t,{H:function(){return n}});var r=a(2126);let l="",s=r.Z.create({baseURL:"https://inspektorat-be.agriciatech.com/api/v1"}),n=()=>{let e=localStorage.getItem("token");e&&(l=e,s.defaults.headers.common.Authorization="Bearer ".concat(l))};s.interceptors.request.use(e=>(e.headers.Accept="application/json",e)),t.Z=s},4193:function(){},4557:function(){}},function(e){e.O(0,[9558,7679,5706,6051,2126,6713,9343,9500,2971,7023,1744],function(){return e(e.s=4989)}),_N_E=e.O()}]);